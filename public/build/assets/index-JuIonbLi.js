import{_ as ne}from"./AppTextField-Dhk438H7.js";import{_ as ge}from"./DialogCloseBtn-D3xd3JNr.js";import{V as Q}from"./VCard-BHQDPESW.js";import{V as L}from"./VCardText-CmyiQv4t.js";import{V as _e}from"./VForm-BpUU7xqx.js";import{V as be}from"./VTable-Bfxydk3f.js";import{V as N}from"./VCheckbox-D8RM1J8u.js";import{r as p,Y as H,w as j,f as A,o as f,e as t,b as e,d as a,t as h,l as n,b1 as V,c as P,F as I,h as ee,ah as K,s as U,a as te,V as ie,k as Y,_ as $,bi as Ve,b0 as we,b9 as xe}from"./main-BZyHWxP-.js";import{V as ye}from"./VDialog-7WxpKhhh.js";import{a as S}from"./avatar-1-mrBiEG2D.js";import{a as B}from"./avatar-2-J3iDMrW6.js";import{a as E}from"./avatar-3-CCfT4M2Q.js";import{a as T}from"./avatar-4-CkT0aFRW.js";import{a as O}from"./avatar-5-roKDnu6B.js";import{a as G}from"./avatar-6-D6_LJK0H.js";import{a as re}from"./avatar-7-BqLdN_QF.js";import{a as he}from"./avatar-8-x-cqZxtu.js";import{a as R,V as ae}from"./VRow-B20rruVT.js";import{V as q}from"./VAvatar-8Zwc_tqP.js";import{a as Ue}from"./formatters-Cw2xOObF.js";import{_ as ke}from"./TablePagination-BcDIDoyL.js";import{_ as Ce}from"./AppSelect-BQEmkTLJ.js";import{_ as De}from"./AddNewUserDrawer-Bpzx8kqy.js";import{u as $e}from"./useApi-CqDIhdYp.js";import{c as Pe}from"./createUrl-RWZycZLg.js";import{$ as oe}from"./api-0WedtC8c.js";import{V as Re}from"./VDivider-CktbFQ7a.js";import{V as Ae}from"./VDataTableServer-B8prfqHZ.js";import{V as Me,a as J,b as Z}from"./VList-DbFeSWDW.js";import{V as Se}from"./VChip-CeQObjZq.js";import"./VTextField-BzLGB-co.js";import"./autofocus-DThxoTWr.js";import"./VCounter-D2PtsxdL.js";import"./VField-CoXLbqml.js";import"./VCheckboxBtn-qZOqlrBl.js";import"./VSelectionControl-DwoCMlaG.js";import"./helpers-DK5QwNv0.js";import"./paginationMeta-DF6W6vpY.js";import"./VPagination-BafHFDao.js";import"./VSelect-CI_o2-A6.js";import"./validators-DpYrMFzk.js";import"./AppDrawerHeaderSection-ksRdleRk.js";import"./vue3-perfect-scrollbar-CdtJzIez.js";import"./VNavigationDrawer-kDh-uP8V.js";import"./ssrBoot-DURCToRA.js";import"./index-CvOPxmL5.js";import"./VDataTable-CLMWV4tH.js";import"./filter-Da5uf3G2.js";import"./VSlideGroup-CbdWe5cW.js";const Be={class:"text-h4 text-center mb-2"},Ee={colspan:"3"},Te={class:"d-flex justify-end"},Ie={class:"text-h6"},Le={class:"d-flex justify-end"},ze={class:"d-flex justify-end"},Fe={class:"d-flex justify-end"},Ne={class:"d-flex align-center justify-center gap-4"},je={__name:"AddEditRoleDialog",props:{rolePermissions:{type:Object,required:!1,default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","update:rolePermissions"],setup(z,{emit:k}){const u=z,_=k,d=p([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),w=p(!1),x=p(""),o=p(),b=H(()=>{let m=0;return d.value.forEach(r=>{Object.entries(r).forEach(([C,M])=>{C!=="name"&&M&&m++})}),m}),y=H(()=>b.value>0&&b.value<d.value.length*3);j(w,m=>{d.value=d.value.map(r=>({...r,read:m,write:m,create:m}))}),j(y,()=>{y.value||(w.value=!1)}),j(d,()=>{b.value===d.value.length*3&&(w.value=!0)},{deep:!0}),j(()=>u,()=>{u.rolePermissions&&u.rolePermissions.permissions.length&&(x.value=u.rolePermissions.name,d.value=d.value.map(m=>{const r=u.rolePermissions?.permissions.find(C=>C.name===m.name);return r?{...m,...r}:m}))});const i=()=>{const m={name:x.value,permissions:d.value};_("update:rolePermissions",m),_("update:isDialogVisible",!1),w.value=!1,o.value?.reset()},v=()=>{_("update:isDialogVisible",!1),w.value=!1,o.value?.reset()};return(m,r)=>{const C=ge,M=ne;return f(),A(ye,{width:m.$vuetify.display.smAndDown?"auto":900,"model-value":u.isDialogVisible,"onUpdate:modelValue":v},{default:t(()=>[e(C,{onClick:v}),e(Q,{class:"pa-sm-10 pa-2"},{default:t(()=>[e(L,null,{default:t(()=>[a("h4",Be,h(u.rolePermissions.name?"Edit":"Add New")+" Role ",1),r[7]||(r[7]=a("p",{class:"text-body-1 text-center mb-6"}," Set Role Permissions ",-1)),e(n(_e),{ref_key:"refPermissionForm",ref:o},{default:t(()=>[e(M,{modelValue:n(x),"onUpdate:modelValue":r[0]||(r[0]=c=>V(x)?x.value=c:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),r[6]||(r[6]=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1)),e(be,{class:"permission-table text-no-wrap mb-6"},{default:t(()=>[a("tr",null,[r[3]||(r[3]=a("td",null,[a("h6",{class:"text-h6"}," Administrator Access ")],-1)),a("td",Ee,[a("div",Te,[e(N,{modelValue:n(w),"onUpdate:modelValue":r[1]||(r[1]=c=>V(w)?w.value=c:null),indeterminate:n(y),"onUpdate:indeterminate":r[2]||(r[2]=c=>V(y)?y.value=c:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(f(!0),P(I,null,ee(n(d),c=>(f(),P("tr",{key:c.name},[a("td",null,[a("h6",Ie,h(c.name),1)]),a("td",null,[a("div",Le,[e(N,{modelValue:c.read,"onUpdate:modelValue":D=>c.read=D,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",ze,[e(N,{modelValue:c.write,"onUpdate:modelValue":D=>c.write=D,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Fe,[e(N,{modelValue:c.create,"onUpdate:modelValue":D=>c.create=D,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",Ne,[e(K,{onClick:i},{default:t(()=>[...r[4]||(r[4]=[U(" Submit ",-1)])]),_:1}),e(K,{color:"secondary",variant:"tonal",onClick:v},{default:t(()=>[...r[5]||(r[5]=[U(" Cancel ",-1)])]),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Oe="/build/assets/avatar-10-D0dIAeHn.png",qe="/build/assets/avatar-9-DQF709tv.png",Qe="/build/assets/girl-using-mobile-CKXBkoEQ.png",He={class:"text-body-1"},Ke={class:"v-avatar-group"},We={class:"d-flex justify-space-between align-center"},Xe={class:"text-h5"},Ye={class:"d-flex align-center"},Ge=["onClick"],Je=["src"],Ze={__name:"RoleCards",setup(z){const k=p([{role:"Administrator",users:[S,B,E,T],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[S,B,E,T,O,G,re],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[S,B,E,T,O],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[S,B,E,T,O,G],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[S,B,E,T,O,G,re,he,qe,Oe],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),u=p(!1),_=p(),d=p(!1),w=x=>{u.value=!0,_.value=x};return(x,o)=>{const b=te("IconBtn"),y=je;return f(),P(I,null,[e(ae,null,{default:t(()=>[(f(!0),P(I,null,ee(n(k),i=>(f(),A(R,{key:i.role,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(Q,null,{default:t(()=>[e(L,{class:"d-flex align-center pb-4"},{default:t(()=>[a("div",He," Total "+h(i.users.length)+" users ",1),e(ie),a("div",Ke,[(f(!0),P(I,null,ee(i.users,(v,m)=>(f(),P(I,{key:v},[i.users.length>4&&i.users.length!==4&&m<3?(f(),A(q,{key:0,size:"40",image:v},null,8,["image"])):Y("",!0),i.users.length===4?(f(),A(q,{key:1,size:"40",image:v},null,8,["image"])):Y("",!0)],64))),128)),i.users.length>4?(f(),A(q,{key:0,color:x.$vuetify.theme.current.dark?"#373B50":"#EEEDF0"},{default:t(()=>[a("span",null," +"+h(i.users.length-3),1)]),_:2},1032,["color"])):Y("",!0)])]),_:2},1024),e(L,null,{default:t(()=>[a("div",We,[a("div",null,[a("h5",Xe,h(i.role),1),a("div",Ye,[a("a",{href:"javascript:void(0)",onClick:v=>w(i.details)}," Edit Role ",8,Ge)])]),e(b,null,{default:t(()=>[e($,{icon:"tabler-copy",class:"text-high-emphasis"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(R,{cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(Q,{class:"h-100",ripple:!1},{default:t(()=>[e(ae,{"no-gutters":"",class:"h-100"},{default:t(()=>[e(R,{cols:"5",class:"d-flex flex-column justify-end align-center mt-5"},{default:t(()=>[a("img",{width:"85",src:n(Qe)},null,8,Je)]),_:1}),e(R,{cols:"7"},{default:t(()=>[e(L,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(K,{size:"small",onClick:o[0]||(o[0]=i=>d.value=!0)},{default:t(()=>[...o[4]||(o[4]=[U(" Add New Role ",-1)])]),_:1}),o[5]||(o[5]=a("div",{class:"text-end"},[U(" Add new role,"),a("br"),U(" if it doesn't exist. ")],-1))]),_:1})]),_:1})]),_:1})]),_:1}),e(y,{"is-dialog-visible":n(d),"onUpdate:isDialogVisible":o[1]||(o[1]=i=>V(d)?d.value=i:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(y,{"is-dialog-visible":n(u),"onUpdate:isDialogVisible":o[2]||(o[2]=i=>V(u)?u.value=i:null),"role-permissions":n(_),"onUpdate:rolePermissions":o[3]||(o[3]=i=>V(_)?_.value=i:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}},et={class:"d-flex gap-2 align-center"},tt={class:"d-flex align-center flex-wrap gap-4"},at={class:"d-flex align-center gap-x-4"},st={key:1},lt={class:"d-flex flex-column"},rt={class:"text-base"},ot={class:"text-sm"},nt={class:"d-flex align-center gap-x-2"},it={class:"text-capitalize text-high-emphasis text-body-1"},ut={class:"text-body-1 text-high-emphasis text-capitalize"},dt={__name:"UserList",async setup(z){let k,u;const _=p(""),d=p(),w=p(),x=p(),o=p(10),b=p(1),y=p(),i=p(),v=p([]),m=g=>{y.value=g.sortBy[0]?.key,i.value=g.sortBy[0]?.order},r=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:C,execute:M}=([k,u]=Ve(()=>$e(Pe("/apps/users",{query:{q:_,status:x,plan:w,role:d,itemsPerPage:o,page:b,sortBy:y,orderBy:i}}))),k=await k,u(),k),c=H(()=>C.value.users),D=H(()=>C.value.totalUsers),ue=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],W=g=>{const l=g.toLowerCase();return l==="subscriber"?{color:"primary",icon:"tabler-user"}:l==="author"?{color:"warning",icon:"tabler-settings"}:l==="maintainer"?{color:"success",icon:"tabler-chart-donut"}:l==="editor"?{color:"info",icon:"tabler-pencil"}:l==="admin"?{color:"error",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"}},de=g=>{const l=g.toLowerCase();return l==="pending"?"warning":l==="active"?"success":l==="inactive"?"secondary":"primary"},X=p(!1),me=async g=>{await oe("/apps/users",{method:"POST",body:g}),M()},se=async g=>{await oe(`/apps/users/${g}`,{method:"DELETE"});const l=v.value.findIndex(F=>F===g);l!==-1&&v.value.splice(l,1),M()};return(g,l)=>{const F=Ce,pe=ne,ce=te("RouterLink"),le=te("IconBtn"),fe=ke;return f(),P("section",null,[e(Q,null,{default:t(()=>[e(L,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[a("div",et,[l[8]||(l[8]=a("p",{class:"text-body-1 mb-0"}," Show ",-1)),e(F,{"model-value":n(o),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":l[0]||(l[0]=s=>o.value=parseInt(s,10))},null,8,["model-value"])]),e(ie),a("div",tt,[e(pe,{modelValue:n(_),"onUpdate:modelValue":l[1]||(l[1]=s=>V(_)?_.value=s:null),placeholder:"Search User",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(F,{modelValue:n(d),"onUpdate:modelValue":l[2]||(l[2]=s=>V(d)?d.value=s:null),placeholder:"Select Role",items:ue,clearable:"","clear-icon":"tabler-x",style:{"inline-size":"10rem"}},null,8,["modelValue"])])]),_:1}),e(Re),e(Ae,{"items-per-page":n(o),"onUpdate:itemsPerPage":l[4]||(l[4]=s=>V(o)?o.value=s:null),"model-value":n(v),"onUpdate:modelValue":l[5]||(l[5]=s=>V(v)?v.value=s:null),page:n(b),"onUpdate:page":l[6]||(l[6]=s=>V(b)?b.value=s:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:n(c),"items-length":n(D),headers:r,class:"text-no-wrap","show-select":"","onUpdate:options":m},{"item.user":t(({item:s})=>[a("div",at,[e(q,{size:"34",variant:s.avatar?void 0:"tonal",color:s.avatar?void 0:W(s.role).color},{default:t(()=>[s.avatar?(f(),A(xe,{key:0,src:s.avatar},null,8,["src"])):(f(),P("span",st,h(("avatarText"in g?g.avatarText:n(Ue))(s.fullName)),1))]),_:2},1032,["variant","color"]),a("div",lt,[a("h6",rt,[e(ce,{to:{name:"apps-user-view-id",params:{id:s.id}},class:"font-weight-medium text-link"},{default:t(()=>[U(h(s.fullName),1)]),_:2},1032,["to"])]),a("div",ot,h(s.email),1)])])]),"item.role":t(({item:s})=>[a("div",nt,[e($,{size:22,icon:W(s.role).icon,color:W(s.role).color},null,8,["icon","color"]),a("div",it,h(s.role),1)])]),"item.plan":t(({item:s})=>[a("div",ut,h(s.currentPlan),1)]),"item.status":t(({item:s})=>[e(Se,{color:de(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[U(h(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(le,{onClick:ve=>se(s.id)},{default:t(()=>[e($,{icon:"tabler-trash"})]),_:1},8,["onClick"]),e(le,null,{default:t(()=>[e($,{icon:"tabler-eye"})]),_:1}),e(K,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e($,{icon:"tabler-dots-vertical"}),e(we,{activator:"parent"},{default:t(()=>[e(Me,null,{default:t(()=>[e(J,{to:{name:"apps-user-view-id",params:{id:s.id}}},{prepend:t(()=>[e($,{icon:"tabler-eye"})]),default:t(()=>[e(Z,null,{default:t(()=>[...l[9]||(l[9]=[U("View",-1)])]),_:1})]),_:1},8,["to"]),e(J,{link:""},{prepend:t(()=>[e($,{icon:"tabler-pencil"})]),default:t(()=>[e(Z,null,{default:t(()=>[...l[10]||(l[10]=[U("Edit",-1)])]),_:1})]),_:1}),e(J,{onClick:ve=>se(s.id)},{prepend:t(()=>[e($,{icon:"tabler-trash"})]),default:t(()=>[e(Z,null,{default:t(()=>[...l[11]||(l[11]=[U("Delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(fe,{page:n(b),"onUpdate:page":l[3]||(l[3]=s=>V(b)?b.value=s:null),"items-per-page":n(o),"total-items":n(D)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1}),e(De,{"is-drawer-open":n(X),"onUpdate:isDrawerOpen":l[7]||(l[7]=s=>V(X)?X.value=s:null),onUserData:me},null,8,["is-drawer-open"])])}}},oa={__name:"index",setup(z){return(k,u)=>(f(),A(ae,null,{default:t(()=>[e(R,{cols:"12"},{default:t(()=>[...u[0]||(u[0]=[a("h4",{class:"text-h4 mb-1"}," Roles List ",-1),a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1)])]),_:1}),e(R,{cols:"12"},{default:t(()=>[e(Ze)]),_:1}),e(R,{cols:"12"},{default:t(()=>[...u[1]||(u[1]=[a("h4",{class:"text-h4 mb-1 mt-6"}," Total users with their roles ",-1),a("p",{class:"text-body-1 mb-0"}," Find all of your companyâ€™s administrator accounts and their associate roles. ",-1)])]),_:1}),e(R,{cols:"12"},{default:t(()=>[e(dt)]),_:1})]),_:1}))}};export{oa as default};
