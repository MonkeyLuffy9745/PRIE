import{V as L,m as q}from"./VField-9ku5YizL.js";import{au as K,a1 as M,ay as E,bU as G,aM as H,ag as J,Y as g,r as b,c2 as Q,aP as U,Z as i,w as y,a6 as X,bX as Y,d as r,H as Z,b as h,F as $,p as F,db as W,aQ as ee,cC as te,aJ as ae,dF as ne,dG as le,bO as ue,b7 as oe,v as se,bj as ie,bS as x}from"./main-BEYAFsWY.js";const re=M({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...ae(),...te(),...ee(q({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),fe=K()({name:"VOtpInput",props:re(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,S){let{attrs:A,emit:I,slots:f}=S;const{dimensionStyles:P}=E(e),{isFocused:V,focus:w,blur:_}=G(e),o=H(e,"modelValue","",t=>t==null?[]:String(t).split(""),t=>t.join("")),{t:D}=J(),c=g(()=>Number(e.length)),B=g(()=>Array(c.value).fill(0)),u=b(-1),v=b(),s=b([]),m=g(()=>s.value[u.value]);let p=!1;Q(()=>e.autofocus,()=>{const t=ne();t.run(()=>{const{intersectionRef:n,isIntersecting:l}=le();ue(()=>{n.value=s.value[0]}),y(l,a=>{a&&(n.value?.focus(),t.stop())})})});function k(){if(C(m.value.value)){m.value.value="";return}if(p)return;const t=o.value.slice(),n=m.value.value;t[u.value]=n;let l=null;u.value>o.value.length?l=o.value.length+1:u.value+1!==c.value&&(l="next"),o.value=t,l&&x(v.value,l)}function O(){p=!1,k()}function R(t){const n=o.value.slice(),l=u.value;let a=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(t.key)&&(t.preventDefault(),t.key==="ArrowLeft"?a="prev":t.key==="ArrowRight"?a="next":["Backspace","Delete"].includes(t.key)&&(n[u.value]="",o.value=n,u.value>0&&t.key==="Backspace"?a="prev":requestAnimationFrame(()=>{s.value[l]?.select()})),requestAnimationFrame(()=>{a!=null&&x(v.value,a)}))}function N(t,n){n.preventDefault(),n.stopPropagation();const l=n?.clipboardData?.getData("Text").trim().slice(0,c.value)??"",a=l.length-1===-1?t:l.length-1;C(l)||(o.value=l.split(""),u.value=a)}function j(){o.value=[]}function T(t,n){w(),u.value=n}function z(){_(),u.value=-1}function C(t){return e.type==="number"&&/[^0-9]/g.test(t)}return U({VField:{color:i(()=>e.color),bgColor:i(()=>e.color),baseColor:i(()=>e.baseColor),disabled:i(()=>e.disabled),error:i(()=>e.error),variant:i(()=>e.variant)}},{scoped:!0}),y(o,t=>{t.length===c.value&&I("finish",t.join(""))},{deep:!0}),y(u,t=>{t<0||oe(()=>{s.value[t]?.select()})}),X(()=>{const[t,n]=Y(A);return r("div",F({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},t),[r("div",{ref:v,class:"v-otp-input__content",style:Z([P.value])},[B.value.map((l,a)=>r($,null,[e.divider&&a!==0&&r("span",{class:"v-otp-input__divider"},[e.divider]),h(L,{focused:V.value&&e.focusAll||u.value===a,key:a},{...f,loader:void 0,default:()=>r("input",{ref:d=>s.value[a]=d,"aria-label":D(e.label,a+1),autofocus:a===0&&e.autofocus,autocomplete:"one-time-code",class:se(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:a===0?c.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:o.value[a],onInput:k,onFocus:d=>T(d,a),onBlur:z,onKeydown:R,onCompositionstart:()=>p=!0,onCompositionend:O,onPaste:d=>N(a,d)},null)})])),r("input",F({class:"v-otp-input-input",type:"hidden"},n,{value:o.value.join("")}),null),h(W,{contained:!0,contentClass:"v-otp-input__loader",modelValue:!!e.loading,persistent:!0},{default:()=>[f.loader?.()??h(ie,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}),f.default?.()])])}),{blur:()=>{s.value?.some(t=>t.blur())},focus:()=>{s.value?.[0].focus()},reset:j,isFocused:V}}});export{fe as V};
