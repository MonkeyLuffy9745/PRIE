import{a as J}from"./formatters-Cw2xOObF.js";import{_ as K}from"./TablePagination-Dh0mjeqN.js";import{_ as W}from"./MoreBtn-BwoO5zNN.js";import{_ as X}from"./AppTextField-DEFx5LB3.js";import{_ as Z}from"./AppSelect-COGYCTau.js";import{u as ee}from"./useApi-2ULgWkV5.js";import{c as te}from"./createUrl-DSuaXwyR.js";import{$ as ae}from"./api-CXpAJbKn.js";import{V as I,b as oe}from"./VCard-CHvE1CVF.js";import{V as E}from"./VCardText-CbE5M2-5.js";import{V as le,a as ne}from"./VRow-rSP3UPT0.js";import{V as $}from"./VAvatar-K7hB1Kku.js";import{r as d,bi as se,Y as D,c as f,l as n,b as t,e as a,a as L,o as r,F as R,h as ie,f as P,k as re,d as s,v as ce,t as i,_ as k,ah as de,s as m,b1 as _,b9 as pe,b8 as ue,p as me}from"./main-B_3U4rnL.js";import{V as F}from"./VDivider-CHuFBZ5S.js";import{V as ve}from"./VDataTableServer-CGm-GRl8.js";import{V as fe}from"./VChip-BAqKzKSp.js";import"./helpers-DK5QwNv0.js";import"./paginationMeta-DF6W6vpY.js";import"./VPagination-ChFIHnfN.js";import"./VList-Ce9acDAh.js";import"./ssrBoot-DCfCAOKs.js";import"./VTextField-eMdtVNtb.js";import"./autofocus-Bw9dR2w9.js";import"./VCounter-D_guRIhI.js";import"./VField-3YJ8FXmc.js";import"./VSelect-DQ-4196m.js";import"./VCheckboxBtn-DobkZaJy.js";import"./VSelectionControl-DLNDeEFn.js";import"./index-CvOPxmL5.js";import"./VDataTable-DEOUo1va.js";import"./VTable-B6Lp1lU8.js";import"./filter-DTgM_L49.js";import"./VSlideGroup-CCtB-AAW.js";const _e={key:0},be={class:"d-flex flex-column"},ye={class:"text-h4"},ge={class:"text-body-1 text-capitalize"},he={class:"d-flex gap-4 align-center flex-wrap"},xe={class:"d-flex align-center gap-2"},Ve={class:"d-flex align-center flex-wrap gap-4"},ke={class:"invoice-list-filter"},we={class:"invoice-list-filter"},Ie={class:"mb-0"},$e={class:"mb-0"},De={class:"mb-0"},Pe={class:"d-flex align-center"},Be={key:1},Ce={class:"d-flex flex-column"},Se={class:"text-sm text-medium-emphasis"},Ue={key:1,class:"text-base text-high-emphasis"},Te={key:1},vt={__name:"index",async setup(Ae){let y,B;const g=d(""),h=d(null),b=d([]),p=d(10),u=d(1),C=d(),S=d(),M=o=>{C.value=o.sortBy[0]?.key,S.value=o.sortBy[0]?.order},x=d([{title:"Clients",value:24,icon:"tabler-user"},{title:"Invoices",value:165,icon:"tabler-file-invoice"},{title:"Paid",value:"$2.46k",icon:"tabler-checks"},{title:"Unpaid",value:"$876",icon:"tabler-circle-off"}]),j=[{title:"#",key:"id"},{title:"Status",key:"status",sortable:!1},{title:"Client",key:"client"},{title:"Total",key:"total"},{title:"Issued Date",key:"date"},{title:"Balance",key:"balance"},{title:"Actions",key:"actions",sortable:!1}],{data:U,execute:q}=([y,B]=se(()=>ee(te("/apps/invoice",{query:{q:g,status:h,itemsPerPage:p,page:u,sortBy:C,orderBy:S}}))),y=await y,B(),y),T=D(()=>U.value.invoices),A=D(()=>U.value.totalInvoices),v=(o,l)=>o===l?{status:"Unpaid",chip:{color:"error"}}:o===0?{status:"Paid",chip:{color:"success"}}:{status:o,chip:{variant:"text"}},w=o=>o==="Partial Payment"?{variant:"warning",icon:"tabler-chart-pie-2"}:o==="Paid"?{variant:"success",icon:"tabler-check"}:o==="Downloaded"?{variant:"info",icon:"tabler-arrow-down"}:o==="Draft"?{variant:"primary",icon:"tabler-folder"}:o==="Sent"?{variant:"secondary",icon:"tabler-mail"}:o==="Past Due"?{variant:"error",icon:"tabler-help"}:{variant:"secondary",icon:"tabler-x"},O=D(()=>o=>[{title:"Download",value:"download",prependIcon:"tabler-download"},{title:"Edit",value:"edit",prependIcon:"tabler-pencil",to:{name:"apps-invoice-edit-id",params:{id:o}}},{title:"Duplicate",value:"duplicate",prependIcon:"tabler-layers-intersect"}]),Q=async o=>{await ae(`/apps/invoice/${o}`,{method:"DELETE"});const l=b.value.findIndex(V=>V===o);l!==-1&&b.value.splice(l,1),q()};return(o,l)=>{const V=Z,Y=X,z=L("RouterLink"),N=L("IconBtn"),G=W,H=K;return n(T)?(r(),f("section",_e,[t(I,{class:"mb-6"},{default:a(()=>[t(E,{class:"px-3"},{default:a(()=>[t(le,null,{default:a(()=>[(r(!0),f(R,null,ie(n(x),(e,c)=>(r(),f(R,{key:c},[t(ne,{cols:"12",sm:"6",md:"3",class:"px-6"},{default:a(()=>[s("div",{class:ce(["d-flex justify-space-between align-center",o.$vuetify.display.xs?c!==n(x).length-1?"border-b pb-4":"":o.$vuetify.display.sm&&c<n(x).length/2?"border-b pb-4":""])},[s("div",be,[s("h4",ye,i(e.value),1),s("span",ge,i(e.title),1)]),t($,{variant:"tonal",rounded:"",size:"42"},{default:a(()=>[t(k,{icon:e.icon,size:"26",color:"high-emphasis"},null,8,["icon"])]),_:2},1024)],2)]),_:2},1024),(o.$vuetify.display.mdAndUp?c!==n(x).length-1:o.$vuetify.display.smAndUp&&c%2===0)?(r(),P(F,{key:0,vertical:"",inset:"",length:"60"})):re("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),t(I,{id:"invoice-list"},{default:a(()=>[t(E,{class:"d-flex justify-space-between align-center flex-wrap gap-4"},{default:a(()=>[s("div",he,[s("div",xe,[l[7]||(l[7]=s("span",null,"Show",-1)),t(V,{"model-value":n(p),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":l[0]||(l[0]=e=>p.value=parseInt(e,10))},null,8,["model-value"])]),t(de,{"prepend-icon":"tabler-plus",to:{name:"apps-invoice-add"}},{default:a(()=>[...l[8]||(l[8]=[m(" Create invoice ",-1)])]),_:1})]),s("div",Ve,[s("div",ke,[t(Y,{modelValue:n(g),"onUpdate:modelValue":l[1]||(l[1]=e=>_(g)?g.value=e:null),placeholder:"Search Invoice"},null,8,["modelValue"])]),s("div",we,[t(V,{modelValue:n(h),"onUpdate:modelValue":l[2]||(l[2]=e=>_(h)?h.value=e:null),placeholder:"Invoice Status",clearable:"","clear-icon":"tabler-x","single-line":"",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])])])]),_:1}),t(F),t(ve,{"model-value":n(b),"onUpdate:modelValue":l[4]||(l[4]=e=>_(b)?b.value=e:null),"items-per-page":n(p),"onUpdate:itemsPerPage":l[5]||(l[5]=e=>_(p)?p.value=e:null),page:n(u),"onUpdate:page":l[6]||(l[6]=e=>_(u)?u.value=e:null),"show-select":"","items-length":n(A),headers:j,items:n(T),"item-value":"id",class:"text-no-wrap","onUpdate:options":M},{"item.id":a(({item:e})=>[t(z,{to:{name:"apps-invoice-preview-id",params:{id:e.id}}},{default:a(()=>[m(" #"+i(e.id),1)]),_:2},1032,["to"])]),"item.status":a(({item:e})=>[t(ue,null,{activator:a(({props:c})=>[t($,me({size:28},c,{color:w(e.invoiceStatus).variant,variant:"tonal"}),{default:a(()=>[t(k,{size:16,icon:w(e.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:a(()=>[s("p",Ie,i(e.invoiceStatus),1),s("p",$e," Balance: "+i(e.balance),1),s("p",De," Due date: "+i(e.dueDate),1)]),_:2},1024)]),"item.client":a(({item:e})=>[s("div",Pe,[t($,{size:"34",color:e.avatar.length?void 0:w(e.invoiceStatus).variant,variant:e.avatar.length?void 0:"tonal",class:"me-3"},{default:a(()=>[e.avatar.length?(r(),P(pe,{key:0,src:e.avatar},null,8,["src"])):(r(),f("span",Be,i(("avatarText"in o?o.avatarText:n(J))(e.client.name)),1))]),_:2},1032,["color","variant"]),s("div",Ce,[t(z,{to:{name:"pages-user-profile-tab",params:{tab:"profile"}},class:"text-link font-weight-medium"},{default:a(()=>[m(i(e.client.name),1)]),_:2},1024),s("span",Se,i(e.client.companyEmail),1)])])]),"item.total":a(({item:e})=>[m(" $"+i(e.total),1)]),"item.date":a(({item:e})=>[m(i(e.issuedDate),1)]),"item.balance":a(({item:e})=>[typeof v(e.balance,e.total).status=="string"?(r(),P(fe,{key:0,color:v(e.balance,e.total).chip.color,label:"",size:"x-small"},{default:a(()=>[m(i(v(e.balance,e.total).status),1)]),_:2},1032,["color"])):(r(),f("span",Ue,i(Number(v(e.balance,e.total).status)>0?`$${v(e.balance,e.total).status}`:`-$${Math.abs(Number(v(e.balance,e.total).status))}`),1))]),"item.actions":a(({item:e})=>[t(N,{onClick:c=>Q(e.id)},{default:a(()=>[t(k,{icon:"tabler-trash"})]),_:1},8,["onClick"]),t(N,{to:{name:"apps-invoice-preview-id",params:{id:e.id}}},{default:a(()=>[t(k,{icon:"tabler-eye"})]),_:1},8,["to"]),t(G,{"menu-list":n(O)(e.id),"item-props":"",color:"undefined"},null,8,["menu-list"])]),bottom:a(()=>[t(H,{page:n(u),"onUpdate:page":l[3]||(l[3]=e=>_(u)?u.value=e:null),"items-per-page":n(p),"total-items":n(A)},null,8,["page","items-per-page","total-items"])]),_:1},8,["model-value","items-per-page","page","items-length","items"])]),_:1})])):(r(),f("section",Te,[t(I,null,{default:a(()=>[t(oe,null,{default:a(()=>[...l[9]||(l[9]=[m("No Invoice Found",-1)])]),_:1})]),_:1})]))}}};export{vt as default};
