import{f as Se}from"./formatters-Cw2xOObF.js";import{r as k,a as se,f as D,o as f,e as t,b as e,d as l,V as J,b1 as P,l as a,bh as pe,c as V,k as W,ah as K,s as y,_ as m,w as be,Y as O,F as T,h as N,p as ce,t as $,u as xe,I as q,b8 as R,J as H,ba as j,b0 as ee,v as Z,b9 as ne,bi as Me,H as Le}from"./main-B_3U4rnL.js";import{C as de}from"./vue3-perfect-scrollbar-DXH9MElz.js";import{_ as ge}from"./TiptapEditor-R1VBqz69.js";import{a as Te,V as Q}from"./VCard-CHvE1CVF.js";import{V as G}from"./VTextField-eMdtVNtb.js";import{V as F}from"./VDivider-CHuFBZ5S.js";import{V as ye}from"./VChip-BAqKzKSp.js";import{$ as fe}from"./api-CXpAJbKn.js";import{V as te,a as ae,b as le}from"./VList-Ce9acDAh.js";import{V as he}from"./VBadge-C1ztMGFm.js";import{V as _e}from"./VAvatar-K7hB1Kku.js";import{V as X}from"./VCardText-CbE5M2-5.js";import{V as $e}from"./VNavigationDrawer-17qKq0HY.js";import{u as De,V as Ae,a as Ie}from"./VMain-mNKYP3vO.js";import{u as Re}from"./useApi-2ULgWkV5.js";import{c as Ue}from"./createUrl-DSuaXwyR.js";import{V as ve}from"./VCheckbox-QMLMF9BD.js";import"./helpers-DK5QwNv0.js";import"./index-CC9o5_Jl.js";import"./index-DzVQabXu.js";import"./autofocus-Bw9dR2w9.js";import"./VCounter-D_guRIhI.js";import"./VField-3YJ8FXmc.js";import"./VSlideGroup-CCtB-AAW.js";import"./index-CvOPxmL5.js";import"./ssrBoot-DCfCAOKs.js";import"./VCheckboxBtn-DobkZaJy.js";import"./VSelectionControl-DLNDeEFn.js";const Be={class:"d-flex align-center"},Ne={class:"d-flex align-center gap-x-2"},Fe={class:"px-1 pe-6 py-1"},Pe={class:"cursor-pointer"},Oe={key:0},je={class:"px-1 pe-6 py-1"},qe={key:0},He={class:"px-1 pe-6 py-1"},Je={class:"px-1 pe-6 py-1"},We={class:"d-flex align-center px-6 py-4"},Ye={__name:"ComposeDialog",emits:["close"],setup(E,{emit:A}){const d=k(""),C=k(""),h=k(""),M=k(""),w=k(""),U=k(""),c=k(!1),v=k(!1),b=()=>{C.value=h.value=M.value=""};return(I,s)=>{const z=se("IconBtn"),g=ge;return f(),D(Q,{class:"email-compose-dialog",elevation:"10","max-width":"30vw"},{default:t(()=>[e(Te,{class:"py-3 px-6"},{default:t(()=>[l("div",Be,[s[11]||(s[11]=l("h5",{class:"text-h5"}," Compose Mail ",-1)),e(J),l("div",Ne,[e(z,{size:"small",icon:"tabler-minus",onClick:s[0]||(s[0]=r=>I.$emit("close"))}),e(z,{size:"small",icon:"tabler-x",onClick:s[1]||(s[1]=r=>{I.$emit("close"),b(),c.value=!1,v.value=!1})})])])]),_:1}),l("div",Fe,[e(G,{modelValue:a(C),"onUpdate:modelValue":s[4]||(s[4]=r=>P(C)?C.value=r:null),density:"compact"},{"prepend-inner":t(()=>[...s[12]||(s[12]=[l("div",{class:"text-base font-weight-medium text-disabled"}," To: ",-1)])]),append:t(()=>[l("span",Pe,[l("span",{onClick:s[2]||(s[2]=r=>c.value=!a(c))},"Cc"),s[13]||(s[13]=l("span",null," | ",-1)),l("span",{onClick:s[3]||(s[3]=r=>v.value=!a(v))},"Bcc")])]),_:1},8,["modelValue"])]),e(pe,null,{default:t(()=>[a(c)?(f(),V("div",Oe,[e(F),l("div",je,[e(G,{modelValue:a(w),"onUpdate:modelValue":s[5]||(s[5]=r=>P(w)?w.value=r:null),density:"compact"},{"prepend-inner":t(()=>[...s[14]||(s[14]=[l("div",{class:"text-disabled font-weight-medium"}," Cc: ",-1)])]),_:1},8,["modelValue"])])])):W("",!0)]),_:1}),e(pe,null,{default:t(()=>[a(v)?(f(),V("div",qe,[e(F),l("div",He,[e(G,{modelValue:a(U),"onUpdate:modelValue":s[6]||(s[6]=r=>P(U)?U.value=r:null),density:"compact"},{"prepend-inner":t(()=>[...s[15]||(s[15]=[l("div",{class:"text-disabled font-weight-medium"}," Bcc: ",-1)])]),_:1},8,["modelValue"])])])):W("",!0)]),_:1}),e(F),l("div",Je,[e(G,{modelValue:a(h),"onUpdate:modelValue":s[7]||(s[7]=r=>P(h)?h.value=r:null),density:"compact"},{"prepend-inner":t(()=>[...s[16]||(s[16]=[l("div",{class:"text-base font-weight-medium text-disabled"}," Subject: ",-1)])]),_:1},8,["modelValue"])]),e(F),e(g,{modelValue:a(d),"onUpdate:modelValue":s[8]||(s[8]=r=>P(d)?d.value=r:null),placeholder:"Message"},null,8,["modelValue"]),l("div",We,[e(K,{color:"primary",class:"me-4","append-icon":"tabler-send",disabled:a(C)==="",onClick:s[9]||(s[9]=r=>{I.$emit("close"),d.value="",b(),c.value=!1,v.value=!1})},{default:t(()=>[...s[17]||(s[17]=[y(" send ",-1)])]),_:1},8,["disabled"]),e(z,{size:"small"},{default:t(()=>[e(m,{icon:"tabler-paperclip"})]),_:1}),e(J),e(z,{size:"small",class:"me-2"},{default:t(()=>[e(m,{icon:"tabler-dots-vertical"})]),_:1}),e(z,{size:"small",onClick:s[10]||(s[10]=r=>{I.$emit("close"),b(),d.value="",c.value=!1,v.value=!1})},{default:t(()=>[e(m,{icon:"tabler-trash"})]),_:1})])]),_:1})}}},Ge={class:"d-flex flex-column h-100"},Ke={class:"px-6 pb-5 pt-6"},Qe={class:"email-filters py-4"},Xe=["href","onClick"],Ze={class:"text-base"},et={class:"email-labels py-4"},tt=["href","onClick"],at={class:"text-body-1 text-high-emphasis"},lt=Object.assign({inheritAttrs:!1},{__name:"EmailLeftSidebarContent",props:{emailsMeta:{type:Object,required:!0}},emits:["toggleComposeDialogVisibility"],setup(E,{emit:A}){const d=E,C=k(0),h=k(0),M=k(0),w=k(0);be(()=>d.emailsMeta,v=>{v&&(C.value=v.inbox,h.value=v.draft,M.value=v.spam,w.value=v.star)},{immediate:!0,deep:!0});const U=O(()=>[{title:"Inbox",prependIcon:"tabler-mail",to:{name:"apps-email"},badge:{content:C.value,color:"primary"}},{title:"Sent",prependIcon:"tabler-send",to:{name:"apps-email-filter",params:{filter:"sent"}}},{title:"Draft",prependIcon:"tabler-edit",to:{name:"apps-email-filter",params:{filter:"draft"}},badge:{content:h.value,color:"warning"}},{title:"Starred",prependIcon:"tabler-star",to:{name:"apps-email-filter",params:{filter:"starred"}},badge:{content:w.value,color:"success"}},{title:"Spam",prependIcon:"tabler-alert-circle",to:{name:"apps-email-filter",params:{filter:"spam"}},badge:{content:M.value,color:"error"}},{title:"Trash",prependIcon:"tabler-trash",to:{name:"apps-email-filter",params:{filter:"trashed"}}}]),c=[{title:"Personal",color:"success",to:{name:"apps-email-label",params:{label:"personal"}}},{title:"Company",color:"primary",to:{name:"apps-email-label",params:{label:"company"}}},{title:"Important",color:"warning",to:{name:"apps-email-label",params:{label:"important"}}},{title:"Private",color:"error",to:{name:"apps-email-label",params:{label:"private"}}}];return(v,b)=>{const I=se("RouterLink");return f(),V("div",Ge,[l("div",Ke,[e(K,{block:"",onClick:b[0]||(b[0]=s=>v.$emit("toggleComposeDialogVisibility"))},{default:t(()=>[...b[1]||(b[1]=[y(" Compose ",-1)])]),_:1})]),e(a(de),{options:{wheelPropagation:!1},class:"h-100"},{default:t(()=>[l("ul",Qe,[(f(!0),V(T,null,N(a(U),s=>(f(),D(I,{key:s.title,class:"d-flex align-center cursor-pointer align-center",to:s.to,custom:""},{default:t(({isActive:z,href:g,navigate:r})=>[l("li",ce({ref_for:!0},v.$attrs,{href:g,class:[z&&"email-filter-active text-primary","d-flex align-center cursor-pointer"],onClick:r}),[e(m,{icon:s.prependIcon,class:"me-2",size:"20"},null,8,["icon"]),l("div",Ze,$(s.title),1),e(J),s.badge?.content?(f(),D(ye,{key:0,color:s.badge.color,label:"",size:"small",class:"rounded-xl px-3"},{default:t(()=>[y($(s.badge?.content),1)]),_:2},1032,["color"])):W("",!0)],16,Xe)]),_:2},1032,["to"]))),128))]),l("ul",et,[b[2]||(b[2]=l("div",{class:"text-caption text-disabled mb-4 px-6"}," LABELS ",-1)),(f(),V(T,null,N(c,s=>e(I,{key:s.title,class:"d-flex align-center",to:s.to,custom:""},{default:t(({isActive:z,href:g,navigate:r})=>[l("li",ce({ref_for:!0},v.$attrs,{href:g,class:[z&&"email-label-active text-primary","cursor-pointer d-flex align-center"],onClick:r}),[e(m,{icon:"tabler-circle-filled",color:s.color,class:"me-2",size:"12"},null,8,["color"]),l("div",at,$(s.title),1)],16,tt)]),_:2},1032,["to"])),64))])]),_:1})])}}}),re=()=>{const E=xe(),A=async(c,v)=>{await fe("apps/email",{method:"POST",body:JSON.stringify({ids:c,data:v})})};return{labels:[{title:"personal",color:"success"},{title:"company",color:"primary"},{title:"important",color:"warning"},{title:"private",color:"error"}],resolveLabelColor:c=>c==="personal"?"success":c==="company"?"primary":c==="important"?"warning":c==="private"?"error":"secondary",shallShowMoveToActionFor:c=>c==="trash"?E.params.filter!=="trashed":c==="inbox"?!(E.params.filter===void 0||E.params.filter==="sent"||E.params.filter==="draft"):c==="spam"?!(E.params.filter==="spam"||E.params.filter==="sent"||E.params.filter==="draft"):!1,emailMoveToFolderActions:[{action:"inbox",icon:"tabler-mail"},{action:"spam",icon:"tabler-alert-octagon"},{action:"trash",icon:"tabler-trash"}],moveSelectedEmailTo:async(c,v)=>{const b={};c==="inbox"?(E.params.filter==="trashed"&&(b.isDeleted=!1),b.folder="inbox"):c==="spam"?(E.params.filter==="trashed"&&(b.isDeleted=!1),b.folder="spam"):c==="trash"&&(b.isDeleted=!0),await A(v,b)},updateEmails:A,updateEmailLabels:async(c,v)=>{await fe("/apps/email",{method:"POST",body:{ids:c,label:v}})}}},st={class:"email-view-header d-flex align-center px-5 py-3"},it={class:"d-flex align-center flex-wrap flex-grow-1 overflow-hidden gap-2"},ot={class:"text-body-1 text-high-emphasis text-truncate"},nt={class:"d-flex flex-wrap gap-2"},rt={class:"d-flex align-center"},dt={class:"email-view-action-bar d-flex align-center text-medium-emphasis px-6 gap-x-1"},ut={class:"d-flex align-center gap-x-1"},mt={class:"d-flex align-start align-sm-center pa-6 gap-x-4"},pt={class:"d-flex flex-wrap flex-grow-1 overflow-hidden"},ct={class:"text-truncate"},ft={class:"text-body-1 text-high-emphasis text-truncate"},vt={class:"text-sm"},bt={class:"d-flex align-center gap-x-4"},xt={class:"text-disabled text-base"},gt={class:"text-body-1 font-weight-medium text-truncate mb-4"},yt=["innerHTML"],ht={class:"text-base"},_t={class:"text-h6 mb-6"},$t={class:"d-flex justify-end gap-4 pt-2 flex-wrap"},kt={__name:"EmailView",props:{email:{type:null,required:!0},emailMeta:{type:Object,required:!0}},emits:["refresh","navigated","close","trash","unread","read","star","unstar"],setup(E,{emit:A}){const d=E,C=A,h=k(""),M=k(!1),w=k(!0),{updateEmailLabels:U}=re(),{labels:c,resolveLabelColor:v,emailMoveToFolderActions:b,shallShowMoveToActionFor:I,moveSelectedEmailTo:s}=re(),z=async r=>{await s(r,[d.email.id]),C("refresh"),C("close")},g=async r=>{await U([d.email.id],r),C("refresh")};return(r,n)=>{const x=se("IconBtn"),ie=ge;return f(),D($e,{"data-allow-mismatch":"",temporary:"","model-value":!!d.email,location:"right",scrim:!1,floating:"",class:"email-view"},{default:t(()=>[d.email?(f(),V(T,{key:0},[l("div",st,[e(x,{class:"me-2",onClick:n[0]||(n[0]=p=>{r.$emit("close"),M.value=!1,w.value=!0,h.value=""})},{default:t(()=>[e(m,{size:"22",icon:"tabler-chevron-left",class:"flip-in-rtl"})]),_:1}),l("div",it,[l("div",ot,$(d.email.subject),1),l("div",nt,[(f(!0),V(T,null,N(d.email.labels,p=>(f(),D(ye,{key:p,color:a(v)(p),class:"text-capitalize flex-shrink-0",size:"small",label:!1},{default:t(()=>[y($(p),1)]),_:2},1032,["color"]))),128))])]),l("div",null,[l("div",rt,[e(x,{disabled:!d.emailMeta.hasPreviousEmail,onClick:n[1]||(n[1]=p=>r.$emit("navigated","previous"))},{default:t(()=>[e(m,{icon:"tabler-chevron-left",class:"flip-in-rtl"})]),_:1},8,["disabled"]),e(x,{disabled:!d.emailMeta.hasNextEmail,onClick:n[2]||(n[2]=p=>r.$emit("navigated","next"))},{default:t(()=>[e(m,{icon:"tabler-chevron-right",class:"flip-in-rtl"})]),_:1},8,["disabled"])])])]),e(F),l("div",dt,[q(e(x,{onClick:n[3]||(n[3]=p=>{r.$emit("trash"),r.$emit("close")})},{default:t(()=>[e(m,{icon:"tabler-trash",size:"22"}),e(R,{activator:"parent",location:"top"},{default:t(()=>[...n[9]||(n[9]=[y(" Delete Mail ",-1)])]),_:1})]),_:1},512),[[H,!d.email.isDeleted]]),e(x,{onClick:n[4]||(n[4]=j(p=>{r.$emit("unread"),r.$emit("close")},["stop"]))},{default:t(()=>[e(m,{icon:"tabler-mail",size:"22"}),e(R,{activator:"parent",location:"top"},{default:t(()=>[...n[10]||(n[10]=[y(" Mark as Unread ",-1)])]),_:1})]),_:1}),e(x,null,{default:t(()=>[e(m,{icon:"tabler-folder",size:"22"}),e(R,{activator:"parent",location:"top"},{default:t(()=>[...n[11]||(n[11]=[y(" Move to ",-1)])]),_:1}),e(ee,{activator:"parent"},{default:t(()=>[e(te,{density:"compact"},{default:t(()=>[(f(!0),V(T,null,N(a(b),p=>(f(),D(ae,{key:p.title,class:Z([a(I)(p.action)?"d-flex":"d-none","align-center"]),href:"#",onClick:Y=>z(p.action)},{prepend:t(()=>[e(m,{icon:p.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(le,{class:"text-capitalize"},{default:t(()=>[y($(p.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(x,null,{default:t(()=>[e(m,{icon:"tabler-tag",size:"22"}),e(R,{activator:"parent",location:"top"},{default:t(()=>[...n[12]||(n[12]=[y(" Label ",-1)])]),_:1}),e(ee,{activator:"parent"},{default:t(()=>[e(te,{density:"compact"},{default:t(()=>[(f(!0),V(T,null,N(a(c),p=>(f(),D(ae,{key:p.title,href:"#",onClick:j(Y=>g(p.title),["stop"])},{prepend:t(()=>[e(he,{inline:"",color:a(v)(p.title),dot:""},null,8,["color"])]),default:t(()=>[e(le,{class:"ms-2 text-capitalize"},{default:t(()=>[y($(p.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(J),l("div",ut,[e(x,{color:d.email.isStarred?"warning":"default",onClick:n[5]||(n[5]=p=>{d.email?.isStarred?r.$emit("unstar"):r.$emit("star"),r.$emit("refresh")})},{default:t(()=>[e(m,{icon:"tabler-star"})]),_:1},8,["color"]),e(x,null,{default:t(()=>[e(m,{icon:"tabler-dots-vertical"})]),_:1})])]),e(F),e(a(de),{tag:"div",class:"mail-content-container flex-grow-1 pa-sm-12 pa-6",options:{wheelPropagation:!1}},{default:t(()=>[e(Q,{class:"mb-4"},{default:t(()=>[l("div",mt,[e(_e,{size:"38"},{default:t(()=>[e(ne,{src:d.email.from.avatar,alt:d.email.from.name},null,8,["src","alt"])]),_:1}),l("div",pt,[l("div",ct,[l("div",ft,$(d.email.from.name),1),l("div",vt,$(d.email.from.email),1)]),e(J),l("div",bt,[l("div",xt,$(new Date(d.email.time).toDateString()),1),l("div",null,[q(e(x,null,{default:t(()=>[e(m,{icon:"tabler-paperclip",size:"22"})]),_:1},512),[[H,d.email.attachments.length]]),e(x,null,{default:t(()=>[e(m,{icon:"tabler-dots-vertical",size:"22"})]),_:1})])])])]),e(F),e(X,null,{default:t(()=>[l("div",gt,$(d.email.from.name)+", ",1),l("div",{class:"text-base",innerHTML:d.email.message},null,8,yt)]),_:1}),d.email.attachments.length?(f(),V(T,{key:0},[e(F),e(X,{class:"d-flex flex-column gap-y-4 pt-4"},{default:t(()=>[n[13]||(n[13]=l("span",null,"2 Attachments",-1)),(f(!0),V(T,null,N(d.email.attachments,p=>(f(),V("div",{key:p.fileName,class:"d-flex align-center"},[e(ne,{src:p.thumbnail,alt:p.fileName,"aspect-ratio":"1","max-height":"24","max-width":"24",class:"me-2"},null,8,["src","alt"]),l("span",null,$(p.fileName),1)]))),128))]),_:1})],64)):W("",!0)]),_:1}),q(e(Q,null,{default:t(()=>[e(X,{class:"font-weight-medium text-high-emphasis"},{default:t(()=>[l("div",ht,[n[14]||(n[14]=y(" Click here to ",-1)),l("span",{class:"text-primary cursor-pointer",onClick:n[6]||(n[6]=p=>{M.value=!a(M),w.value=!a(w)})}," Reply "),n[15]||(n[15]=y(" or ",-1)),n[16]||(n[16]=l("span",{class:"text-primary cursor-pointer"}," Forward ",-1))])]),_:1})]),_:1},512),[[H,a(w)]]),a(M)?(f(),D(Q,{key:0},{default:t(()=>[e(X,null,{default:t(()=>[l("h6",_t," Reply to "+$(E.email?.from.name),1),e(ie,{modelValue:a(h),"onUpdate:modelValue":n[7]||(n[7]=p=>P(h)?h.value=p:null),placeholder:"Write your message..."},null,8,["modelValue"]),l("div",$t,[e(K,{icon:"",variant:"text",color:"secondary",onClick:n[8]||(n[8]=p=>{M.value=!a(M),w.value=!a(w),h.value=""})},{default:t(()=>[e(m,{icon:"tabler-trash"})]),_:1}),e(K,{variant:"text",color:"secondary"},{prepend:t(()=>[e(m,{icon:"tabler-paperclip",class:"text-high-emphasis",size:"16"})]),default:t(()=>[n[17]||(n[17]=y(" Attachments ",-1))]),_:1}),e(K,{"append-icon":"tabler-send"},{default:t(()=>[...n[18]||(n[18]=[y(" Send ",-1)])]),_:1})])]),_:1})]),_:1})):W("",!0)]),_:1})],64)):W("",!0)]),_:1},8,["model-value"])}}},Ct={class:"d-flex align-center"},wt={class:"py-2 px-4 d-flex align-center d-flex gap-x-1"},Vt=["onClick"],Et={class:"text-h6"},zt={class:"text-body-2 truncate"},St={class:"text-sm text-disabled"},Mt={class:"email-actions d-none"},Lt={class:"py-4 px-5 text-center"},na={__name:"index",async setup(E){let A,d;const{isLeftSidebarOpen:C}=De(),h=xe(),{labels:M,resolveLabelColor:w,emailMoveToFolderActions:U,shallShowMoveToActionFor:c,moveSelectedEmailTo:v,updateEmails:b,updateEmailLabels:I}=re(),s=k(!1),z=k(""),g=k([]),{data:r,execute:n}=([A,d]=Me(()=>Re(Ue("/apps/email",{query:{q:z,filter:()=>"filter"in h.params?h.params.filter:void 0,label:()=>"label"in h.params?h.params.label:void 0}}))),A=await A,d(),A),x=O(()=>r.value.emails),ie=O(()=>r.value.emailsMeta),p=u=>{const i=g.value.indexOf(u);i===-1?g.value.push(u):g.value.splice(i,1)},Y=O(()=>x.value.length&&x.value.length===g.value.length),ue=O(()=>!!g.value.length&&x.value.length!==g.value.length),oe=O(()=>g.value.every(u=>x.value.find(i=>i.id===u)?.isRead)),ke=()=>{g.value=Y.value?[]:x.value.map(u=>u.id)},_=k(null),Ce=O(()=>{const u={hasNextEmail:!1,hasPreviousEmail:!1};if(_.value){const i=x.value.findIndex(S=>S.id===_.value?.id);u.hasNextEmail=!!x.value[i+1],u.hasPreviousEmail=!!x.value[i-1]}return u}),me=async()=>{await n(),_.value&&(_.value=x.value.find(u=>u.id===_.value?.id))},L=async(u,i=g.value)=>{g.value=[],g.value=[],i.length&&(u==="trash"?await b(i,{isDeleted:!0}):u==="spam"?await b(i,{folder:"spam"}):u==="unread"?await b(i,{isRead:!1}):u==="read"?await b(i,{isRead:!0}):u==="star"?await b(i,{isStarred:!0}):u==="unstar"&&await b(i,{isStarred:!1}),_.value?me():await n())},we=async u=>{await v(u,g.value),await n()},Ve=async u=>{await I(g.value,u),await n()},Ee=u=>{if(!_.value)return;const i=x.value.findIndex(o=>o.id===_.value?.id),S=u==="previous"?i-1:i+1;_.value=x.value[S]},ze=async u=>{_.value=u,await L("read",[u.id])};return be(()=>h.params,()=>{g.value=[]},{deep:!0}),(u,i)=>{const S=se("IconBtn");return f(),D(Ae,{style:{"z-index":"0","min-block-size":"100%"},class:"email-app-layout"},{default:t(()=>[e($e,{modelValue:a(C),"onUpdate:modelValue":i[1]||(i[1]=o=>P(C)?C.value=o:null),"data-allow-mismatch":"",absolute:"",touchless:"",location:"start",temporary:u.$vuetify.display.mdAndDown},{default:t(()=>[e(lt,{"emails-meta":a(ie),onToggleComposeDialogVisibility:i[0]||(i[0]=o=>s.value=!a(s))},null,8,["emails-meta"])]),_:1},8,["modelValue","temporary"]),e(kt,{email:a(_),"email-meta":a(Ce),onRefresh:me,onNavigated:Ee,onClose:i[2]||(i[2]=o=>_.value=null),onTrash:i[3]||(i[3]=o=>L("trash",a(_)?[a(_).id]:[])),onUnread:i[4]||(i[4]=o=>L("unread",a(_)?[a(_).id]:[])),onStar:i[5]||(i[5]=o=>L("star",a(_)?[a(_).id]:[])),onUnstar:i[6]||(i[6]=o=>L("unstar",a(_)?[a(_).id]:[]))},null,8,["email","email-meta"]),e(Ie,null,{default:t(()=>[e(Q,{flat:"",class:"email-content-list h-100 d-flex flex-column"},{default:t(()=>[l("div",Ct,[e(S,{class:"d-lg-none ms-3",onClick:i[7]||(i[7]=o=>C.value=!0)},{default:t(()=>[e(m,{icon:"tabler-menu-2"})]),_:1}),e(G,{modelValue:a(z),"onUpdate:modelValue":i[8]||(i[8]=o=>P(z)?z.value=o:null),density:"default",class:"email-search px-sm-2 flex-grow-1 py-1",placeholder:"Search mail"},{"prepend-inner":t(()=>[e(m,{icon:"tabler-search",size:"24",class:"me-1 text-medium-emphasis"})]),_:1},8,["modelValue"])]),e(F),l("div",wt,[e(ve,{"model-value":a(Y),indeterminate:a(ue),class:"d-flex","onUpdate:modelValue":ke},null,8,["model-value","indeterminate"]),l("div",{class:"w-100 d-flex align-center action-bar-actions gap-x-1",style:Le({visibility:a(ue)||a(Y)?void 0:"hidden"})},[q(e(S,{onClick:i[9]||(i[9]=o=>L("trash"))},{default:t(()=>[e(m,{icon:"tabler-trash",size:"22"}),e(R,{activator:"parent",location:"top"},{default:t(()=>[...i[13]||(i[13]=[y(" Delete Mail ",-1)])]),_:1})]),_:1},512),[[H,"filter"in a(h).params?a(h).params.filter!=="trashed":!0]]),e(S,{onClick:i[10]||(i[10]=o=>a(oe)?L("unread"):L("read"))},{default:t(()=>[e(m,{icon:a(oe)?"tabler-mail":"tabler-mail-opened",size:"22"},null,8,["icon"]),e(R,{activator:"parent",location:"top"},{default:t(()=>[y($(a(oe)?"Mark as Unread":"Mark as Read"),1)]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(m,{icon:"tabler-folder",size:"22"}),e(R,{activator:"parent",location:"top"},{default:t(()=>[...i[14]||(i[14]=[y(" Folder ",-1)])]),_:1}),e(ee,{activator:"parent"},{default:t(()=>[e(te,{density:"compact"},{default:t(()=>[(f(!0),V(T,null,N(a(U),o=>(f(),D(ae,{key:o.title,class:Z([a(c)(o.action)?"d-flex":"d-none","items-center"]),href:"#",onClick:B=>we(o.action)},{prepend:t(()=>[e(m,{icon:o.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(le,{class:"text-capitalize"},{default:t(()=>[y($(o.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(m,{icon:"tabler-tag",size:"22"}),e(R,{activator:"parent",location:"top"},{default:t(()=>[...i[15]||(i[15]=[y(" Label ",-1)])]),_:1}),e(ee,{activator:"parent"},{default:t(()=>[e(te,{density:"compact"},{default:t(()=>[(f(!0),V(T,null,N(a(M),o=>(f(),D(ae,{key:o.title,href:"#",onClick:B=>Ve(o.title)},{prepend:t(()=>[e(he,{inline:"",color:a(w)(o.title),dot:""},null,8,["color"])]),default:t(()=>[e(le,{class:"ms-2 text-capitalize"},{default:t(()=>[y($(o.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})],4),e(J),e(S,{onClick:a(n)},{default:t(()=>[e(m,{icon:"tabler-refresh",size:"22"})]),_:1},8,["onClick"]),e(S,null,{default:t(()=>[e(m,{icon:"tabler-dots-vertical",size:"22"})]),_:1})]),e(F),e(a(de),{tag:"ul",options:{wheelPropagation:!1},class:"email-list"},{default:t(()=>[(f(!0),V(T,null,N(a(x),o=>q((f(),V("li",{key:o.id,class:Z(["email-item d-flex align-center pa-4 gap-2 cursor-pointer",[{"email-read":o.isRead}]]),onClick:B=>ze(o)},[e(ve,{"model-value":a(g).includes(o.id),class:"flex-shrink-0","onUpdate:modelValue":B=>p(o.id),onClick:i[11]||(i[11]=j(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"]),e(S,{color:o.isStarred?"warning":"default",onClick:j(B=>L(o.isStarred?"unstar":"star",[o.id]),["stop"])},{default:t(()=>[e(m,{icon:"tabler-star",size:"22"})]),_:1},8,["color","onClick"]),e(_e,{size:"32"},{default:t(()=>[e(ne,{src:o.from.avatar,alt:o.from.name},null,8,["src","alt"])]),_:2},1024),l("h6",Et,$(o.from.name),1),l("span",zt,$(o.subject),1),e(J),l("div",{class:Z(["email-meta align-center gap-2",u.$vuetify.display.xs?"d-none":""])},[(f(!0),V(T,null,N(o.labels,B=>(f(),D(m,{key:B,icon:"tabler-circle-filled",size:"10",color:a(w)(B)},null,8,["color"]))),128)),l("span",St,$(("formatDateToMonthShort"in u?u.formatDateToMonthShort:a(Se))(o.time)),1)],2),l("div",Mt,[e(S,{onClick:j(B=>L("trash",[o.id]),["stop"])},{default:t(()=>[e(m,{icon:"tabler-trash",size:"22"}),e(R,{activator:"parent",location:"top"},{default:t(()=>[...i[16]||(i[16]=[y(" Delete Mail ",-1)])]),_:1})]),_:1},8,["onClick"]),e(S,{class:"mx-2",onClick:j(B=>L(o.isRead?"unread":"read",[o.id]),["stop"])},{default:t(()=>[e(m,{icon:o.isRead?"tabler-mail":"tabler-mail-opened",size:"22"},null,8,["icon"]),e(R,{activator:"parent",location:"top"},{default:t(()=>[y($(o.isRead?"Mark as Unread":"Mark as Read"),1)]),_:2},1024)]),_:2},1032,["onClick"]),e(S,{onClick:j(B=>L("spam",[o.id]),["stop"])},{default:t(()=>[e(m,{icon:"tabler-info-circle",size:"22"}),e(R,{activator:"parent",location:"top"},{default:t(()=>[...i[17]||(i[17]=[y(" Move to Spam ",-1)])]),_:1})]),_:1},8,["onClick"])])],10,Vt)),[[H,a(x)?.length]])),128)),q(l("li",Lt,[...i[18]||(i[18]=[l("span",{class:"text-high-emphasis"},"No items found.",-1)])],512),[[H,!a(x).length]])]),_:1})]),_:1}),q(e(Ye,{onClose:i[12]||(i[12]=o=>s.value=!1)},null,512),[[H,a(s)]])]),_:1})]),_:1})}}};export{na as default};
