import{r as G}from"./validators-DpYrMFzk.js";import{w as Z,r as w,a as $e,f as S,o as y,e as b,b as d,l as u,k as E,ba as W,s as B,t as L,d as N,_ as I,b9 as re,b8 as fe,b1 as X,ah as U,c as C,b7 as _e,F as Y,h as Q,V as Oe,b0 as ze,p as Le,de as oe,df as j,v as Fe,bi as Ke}from"./main-B6snbbeR.js";import{_ as Me}from"./AppSelect-C6U63Sj9.js";import{_ as Ue}from"./AppDateTimePicker-Bx-MTveK.js";import{_ as Re}from"./AppTextField-Dwj4zAS-.js";import{_ as qe}from"./AppDrawerHeaderSection-D2osDStX.js";import{u as He,S as Ze,P as We,U as Xe,E as Ye}from"./index-DFu869fT.js";import{T as Je}from"./index-BoGDE_Rn.js";import{C as je}from"./vue3-perfect-scrollbar-DtQxLb6n.js";import{a as Ge}from"./avatar-1-mrBiEG2D.js";import{a as Qe}from"./avatar-2-J3iDMrW6.js";import{a as et}from"./avatar-3-CCfT4M2Q.js";import{a as tt}from"./avatar-4-CkT0aFRW.js";import{a as nt}from"./avatar-5-roKDnu6B.js";import{a as at}from"./avatar-6-D6_LJK0H.js";import{V as rt}from"./VDivider-BP2GefMD.js";import{V as ee}from"./VForm-CizDvvzm.js";import{V as me}from"./VCardText-BSdQ4zK2.js";import{V as ot,a as M}from"./VRow-B2681vdV.js";import{V as ge}from"./VChip-D8r7GnSM.js";import{V as lt}from"./VSelect-5Eb_uP-l.js";import{V as pe}from"./VAvatar-DkcJ3saq.js";import{V as it}from"./VFileInput-Czz54LMo.js";import{V as st}from"./VNavigationDrawer-C12geeEY.js";import{_ as dt}from"./MoreBtn-CDz49GkV.js";import{_ as ct}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as ut}from"./VList-CrjmOZbb.js";import{V as ft}from"./VCard-HETOwAdS.js";import{V as be}from"./VTextField-DR58sDH5.js";import{V as mt}from"./VTextarea-B7hS5bD5.js";import{u as gt}from"./useApi-BmrklLGP.js";import{$ as O}from"./api-BSnM5f-O.js";import"./helpers-DK5QwNv0.js";import"./VField-CXJI-EvL.js";import"./VSlideGroup-Db53_zVb.js";import"./VCheckboxBtn-C4UbZbdp.js";import"./VSelectionControl-B5OrGKrL.js";import"./VCounter-x5LZ_YaQ.js";import"./ssrBoot-C-ymkyqZ.js";import"./autofocus-BfAo_r6c.js";import"./index-CvOPxmL5.js";function pt(e,t){var n=!1;return function(...a){n||(e.call(null,...a),n=!0,setTimeout(function(){n=!1},t))}}function he(e){return e.split(" ").filter(t=>t)}var ve=typeof window<"u";function R(e,t,n=!1){if(!t)return;const a=he(t);if(a.length&&!a.includes("longTouch"))for(const r of e){if(!J(r)||!$.has(r)){r.classList.add(...a);continue}const o=[],l=$.get(r);if(l){for(const s of a)r.classList.contains(s)?r.classList.contains(s)&&n===!1&&o.push(s):r.classList.add(s);l.privateClasses=o,$.set(r,l)}}}function te(e,t){if(!t)return;const n=he(t);if(n.length)for(const a of e){if(!J(a)){a.classList.remove(...n);continue}const r=$.get(a);if(r)for(const o of n)r.privateClasses.includes(o)||a.classList.remove(o)}}function De(e){let t=e.parentNode;for(;t!==null&&t.nodeType===1&&t instanceof HTMLElement;){const a=window.getComputedStyle(t).getPropertyValue("overflow");if(a==="scroll"||a==="auto")return t;t=t.parentNode}return document.documentElement}function bt(e){if(!(e.e instanceof TouchEvent))return;const t=e.e.touches[0].clientX,n=e.e.touches[0].clientY;let a=document.elementFromPoint(t,n);if(!J(a))return;let r,o=!0;for(;a&&o;){if($.has(a)||A.has(a)){o=!1,r=A.has(a);break}a=a.parentNode}if(r){const l=A.get(a);return l?{parent:{el:a,data:l}}:void 0}else{const l=$.get(a);if(!l)return;const s=A.get(a.parentNode);return s?{node:{el:a,data:l},parent:{el:a.parentNode,data:s}}:void 0}}function J(e){return e instanceof HTMLElement&&e.parentNode instanceof HTMLElement}function ye(e,t){const n=new AbortController;for(const a in t){const r=t[a];e.addEventListener(a,r,{signal:n.signal,passive:!1})}return n}function Ne(e,t,n=!1){const a=window.getComputedStyle(e),r=["position","z-index","top","left","x","pointer-events","y","transform-origin","filter","-webkit-text-fill-color"];for(const o of Array.from(a))n===!1&&o&&r.includes(o)||t.style.setProperty(o,a.getPropertyValue(o),a.getPropertyPriority(o));for(const o of Array.from(e.children)){if(!J(o))continue;const l=t.children[Array.from(e.children).indexOf(o)];Ne(o,l,n)}}function q(e){return e instanceof DragEvent?{x:e.clientX,y:e.clientY}:{x:e.touches[0].clientX,y:e.touches[0].clientY}}Array();function we(e={}){const t=[{transform:`translateY(${e.yScale||50}%)`},{transform:`translateY(${e.yScale||0}%)`}],n=[{transform:`translateY(-${e.yScale||50}%)`},{transform:`translateY(${e.yScale||0}%)`}],a=[{transform:`translateX(${e.xScale||50}%)`},{transform:`translateX(${e.xScale||0}%)`}],r=[{transform:`translateX(-${e.xScale||50}%)`},{transform:`translateX(${e.xScale||0}%)`}];return o=>{if(A.get(o))return{setup(){document.head.querySelector("[data-drag-and-drop]")},setupNodeRemap(s){if(!i)return;const c=e.duration||150;if(s.nodeData.value===i.draggedNode.data.value){switch(i.incomingDirection){case"below":_(s.node,t,c);break;case"above":_(s.node,n,c);break;case"left":_(s.node,r,c);break;case"right":_(s.node,a,c);break}return}if(!i.affectedNodes.map(V=>V.data.value).includes(s.nodeData.value))return;const h=s.node.getBoundingClientRect(),v=i.affectedNodes.findIndex(V=>V.data.value===s.nodeData.value),x=i.draggedNode.data.index>=i.targetIndex;let f;if(x?f=i.affectedNodes[v+1]?i.affectedNodes[v+1]:i.affectedNodes[v-1]:f=i.affectedNodes[v-1]?i.affectedNodes[v-1]:i.affectedNodes[v+1],f){const V=Math.abs(h.x-f.el.getBoundingClientRect().x),T=Math.abs(h.y-f.el.getBoundingClientRect().y);V>T&&x?_(s.node,r,c):V>T&&!x&&_(s.node,a,c)}else switch(i.incomingDirection){case"below":_(s.node,n,c);break;case"above":_(s.node,t,c);break;case"left":_(s.node,a,c);break;case"right":_(s.node,r,c);break}}}}}function _(e,t,n){i&&(i.preventEnter=!0,e.animate(t,{duration:n}),setTimeout(()=>{i&&(i.preventEnter=!1)},n))}Array();Array();var ce={up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]},$=new WeakMap,A=new WeakMap,i=void 0;function ht(){i=void 0}function xe(e){return i={ascendingDirection:!1,incomingDirection:void 0,enterCount:0,targetIndex:0,affectedNodes:[],lastValue:void 0,activeNode:void 0,lastTargetValue:void 0,remapJustFinished:!1,preventEnter:!1,clonedDraggedEls:[],originalZIndex:void 0,transferred:!1,...e},i}function vt(e,t){return i={...e,...t},i}function ke(e){const{x:t,y:n}=q(e.e);return{coordinates:{x:t,y:n},draggedNode:{el:e.targetData.node.el,data:e.targetData.node.data},draggedNodes:[{el:e.targetData.node.el,data:e.targetData.node.data}],initialIndex:e.targetData.node.data.index,initialParent:{el:e.targetData.parent.el,data:e.targetData.parent.data},lastParent:{el:e.targetData.parent.el,data:e.targetData.parent.data},scrollParent:De(e.targetData.node.el)}}function Dt(e,t){const n=Te(e),r=[...le(t.targetData.parent.el,t.targetData.parent.data).filter(o=>!n.includes(o))];r.splice(t.targetData.node.data.index,0,...n),e.lastTargetValue=t.targetData.node.data.value,ie(t.targetData.parent.el,t.targetData.parent.data,[...r])}function le(e,t){return[...t.getValues(e)]}function ie(e,t,n){t.setValues(n,e)}function Te(e){return[...e.draggedNodes.map(t=>t.data.value)]}function yt({parent:e,getValues:t,setValues:n,config:a={}}){if(!ve)return;document.addEventListener("dragover",l=>{if(l.preventDefault(),!($.has(l.target)||A.has(l.target))&&i){i.remapJustFinished=!1,i.lastTargetValue=void 0;const{x:s,y:c}=q(l);i.coordinates.y=c,i.coordinates.x=s,ne()}}),Nt(e);const r={getValues:t,setValues:n,config:{handleDragstart:Tt,handleDragoverNode:Jt,handleDragoverParent:jt,handleEnd:Ce,handleTouchstart:Ot,handleTouchmove:Kt,handleTouchOverNode:Et,handleTouchOverParent:Gt,handleDragenterNode:en,handleDragleaveNode:tn,performSort:Dt,performTransfer:Ae,root:document,setupNode:Bt,setupNodeRemap:Ve,reapplyDragClasses:At,tearDownNode:$t,tearDownNodeRemap:St,remapFinished:kt,scrollBehavior:{x:.8,y:.8},threshold:{horizontal:0,vertical:0},...a},enabledNodes:[],abortControllers:{}};new MutationObserver(xt).observe(e,{childList:!0}),A.set(e,r),a.plugins?.forEach(l=>{l(e)?.tearDown?.()}),a.plugins?.forEach(l=>{l(e)?.tearDown?.()}),a.plugins?.forEach(l=>{l(e)?.setup?.()}),wt(e,r),se(e,!0)}function Nt(e){const t=A.get(e);t&&t.abortControllers.mainParent&&t.abortControllers.mainParent.abort()}function wt(e,t){t.abortControllers.mainParent=ye(e,{dragover:rn(pt(t.config.handleDragoverParent,10)),touchOverParent:t.config.handleTouchOverParent})}function xt(e){const t=e[0].target;t instanceof HTMLElement&&se(t)}function se(e,t){const n=A.get(e);if(!n)return;const a=[],r=n.config;for(let s=0;s<e.children.length;s++){const c=e.children[s];if(!J(c))continue;const h=$.get(c);(t||!h)&&r.tearDownNode({node:c,parent:e,nodeData:h,parentData:n}),!r.disabled&&(!r.draggable||r.draggable&&r.draggable(c))&&a.push(c)}if(a.length!==n.getValues(e).length&&!r.disabled){console.warn("The number of enabled nodes does not match the number of values.");return}const o=n.getValues(e),l=[];for(let s=0;s<a.length;s++){const c=a[s],h=$.get(c),v=Object.assign(h??{privateClasses:[],abortControllers:{}},{value:o[s],index:s});if(i&&v.value===i.draggedNode.data.value&&(i.draggedNode.data=v,i.draggedNode.el=c),i&&i.draggedNodes.map(x=>x.data.value).includes(v.value)){const x=i.draggedNodes.find(f=>f.data.value===v.value);x&&(x.el=c)}l.push({el:c,data:v});const P={node:c,parent:e,parentData:n,nodeData:v};(t||!h)&&r.setupNode(P),Ve(P)}A.set(e,{...n,enabledNodes:l}),r.remapFinished(n)}function kt(){i&&(i.remapJustFinished=!0,i.affectedNodes=[])}function Tt(e){e.e instanceof DragEvent&&Pt({e:e.e,targetData:e.targetData})}function It(e,t,n){R([e],t),setTimeout(()=>{te([e],t),R([e],n)})}function Vt(e){const t=xe(ke(e));return e.e.stopPropagation(),e.e.dataTransfer&&(e.e.dataTransfer.dropEffect="move",e.e.dataTransfer.effectAllowed="move",e.e.dataTransfer.setDragImage(e.targetData.node.el,e.e.offsetX,e.e.offsetY)),t}function Ie(e){if(!(e.e instanceof DragEvent)&&!(e.e instanceof TouchEvent))return!1;const t=e.targetData.parent.data.config;if(!t.dragHandle)return!0;const n=e.targetData.node.el.querySelectorAll(t.dragHandle);if(!n)return!1;const a=q(e.e),r=t.root.elementFromPoint(a.x,a.y);if(!r)return!1;for(const o of Array.from(n))if(r===o||o.contains(r))return!0;return!1}function Ct(e){if(!Ie(e))return;const t=zt(e);Lt(e,t),Ft(e,t)}function Pt(e){if(!Ie(e)){e.e.preventDefault();return}const t=e.targetData.parent.data.config,n=Vt(e),a=e.targetData.node.el.style.zIndex;n.originalZIndex=a,e.targetData.node.el.style.zIndex="9999",It(n.draggedNode.el,t.draggingClass,t.dropZoneClass)}function Et(e){i&&(e.detail.targetData.parent.el===i.lastParent.el?Be(e.detail,i):ae(e.detail,i))}function Bt(e){const t=e.parentData.config;e.node.draggable=!0,e.nodeData.abortControllers.mainNode=ye(e.node,{dragstart:z(t.handleDragstart),dragover:z(t.handleDragoverNode),dragenter:z(t.handleDragenterNode),dragleave:z(t.handleDragleaveNode),dragend:z(t.handleEnd),touchstart:z(t.handleTouchstart),touchmove:z(t.handleTouchmove),touchend:z(t.handleEnd),touchOverNode:t.handleTouchOverNode}),t.reapplyDragClasses(e.node,e.parentData),e.parentData.config.plugins?.forEach(n=>{n(e.parent)?.setupNode?.(e)})}function Ve(e){$.set(e.node,e.nodeData),e.parentData.config.plugins?.forEach(t=>{t(e.parent)?.setupNodeRemap?.(e)})}function At(e,t){if(!i)return;const n="touchedNode"in i?t.config.touchDropZoneClass:t.config.dropZoneClass;i.draggedNode.el===e&&R([e],n,!0)}function St(e){e.parentData.config.plugins?.forEach(t=>{t(e.parent)?.tearDownNodeRemap?.(e)})}function $t(e){e.parentData.config.plugins?.forEach(t=>{t(e.parent)?.tearDownNode?.(e)}),e.node.draggable=!1,e.nodeData?.abortControllers?.mainNode&&e.nodeData?.abortControllers?.mainNode.abort()}function Ce(e){i&&(_t(e,i),ht())}function _t(e,t){document.removeEventListener("contextmenu",Pe),"longTouchTimeout"in t&&t.longTouchTimeout&&clearTimeout(t.longTouchTimeout);const n=A.get(t.initialParent.el)?.config,r="touchedNode"in t?n?.touchDropZoneClass:n?.dropZoneClass;t.originalZIndex!==void 0&&(t.draggedNode.el.style.zIndex=t.originalZIndex),R(t.draggedNodes.map(o=>o.el),r,!0),te(t.draggedNodes.map(o=>o.el),r),n?.longTouchClass&&te(t.draggedNodes.map(o=>o.el),t.initialParent.data?.config?.longTouchClass),"touchedNode"in t&&t.touchedNode?.remove()}function Ot(e){e.e instanceof TouchEvent&&Ct({e:e.e,targetData:e.targetData})}function zt(e){e.e.stopPropagation();const t=e.targetData.node.el.cloneNode(!0),n=e.targetData.node.el.getBoundingClientRect();return vt(xe(ke(e)),{coordinates:{x:e.e.touches[0].clientX,y:e.e.touches[0].clientY},scrollParent:De(e.targetData.node.el),touchStartLeft:e.e.touches[0].clientX-n.left,touchStartTop:e.e.touches[0].clientY-n.top,touchedNode:t,touchMoving:!1})}function Pe(e){e.preventDefault()}function Lt(e,t){t.touchedNodeDisplay=t.touchedNode.style.display;const n=e.targetData.node.el.getBoundingClientRect();t.touchedNode.style.cssText=`
            width: ${n.width}px;
            position: fixed;
            pointer-events: none;
            top: -9999px;
            z-index: 999999;
            display: none;
          `,document.body.append(t.touchedNode),Ne(e.targetData.node.el,t.touchedNode),t.touchedNode.style.display="none",document.addEventListener("contextmenu",Pe)}function Ft(e,t){const n=e.targetData.parent.data.config;n.longTouch&&(t.longTouchTimeout=setTimeout(()=>{t&&(t.longTouch=!0,n.longTouchClass&&e.e.cancelable&&R(t.draggedNodes.map(a=>a.el),n.longTouchClass),e.e.preventDefault())},n.longTouchTimeout||200))}function Kt(e){!i||!("touchedNode"in i)||Yt(e,i)}function Mt(e,t){t.longTouchClass&&te(e.draggedNodes.map(n=>n.el),t?.longTouchClass),t.touchDraggingClass&&R([e.touchedNode],t.touchDraggingClass),t.touchDropZoneClass&&R(e.draggedNodes.map(n=>n.el),t.touchDropZoneClass)}function Ut(e){if(!e||!e.scrollParent||e.scrollParent===document.documentElement&&!("touchedNode"in e))return;const{x:t,y:n,width:a,height:r}=e.scrollParent.getBoundingClientRect(),{x:o,y:l,scrollOutside:s}=e.lastParent.data.config.scrollBehavior;return{state:e,xThresh:o,yThresh:l,scrollOutside:s,scrollParent:e.scrollParent,x:t,y:n,width:a,height:r}}function Rt(e){const t=Ut(i);if(t)switch(e){case"down":return Wt(t.state,t);case"up":return Zt(t.state,t);case"right":return qt(t.state,t);case"left":return Ht(t.state,t)}}function qt(e,t){const n=t.scrollParent.clientWidth+t.x-e.coordinates.x;if(!(!t.scrollOutside&&n<0)&&n<(1-t.xThresh)*t.scrollParent.clientWidth&&!(t.scrollParent.scrollLeft+t.scrollParent.clientWidth>=t.scrollParent.scrollWidth))return e}function Ht(e,t){const n=t.scrollParent.clientWidth+t.x-e.coordinates.x;if(!(!t.scrollOutside&&n>t.scrollParent.clientWidth)&&n>t.xThresh*t.scrollParent.clientWidth&&t.scrollParent.scrollLeft!==0)return e}function Zt(e,t){const n=t.scrollParent.clientHeight+t.y-e.coordinates.y;if(!(!t.scrollOutside&&n>t.scrollParent.clientHeight)&&n>t.yThresh*t.scrollParent.clientHeight&&t.scrollParent.scrollTop!==0)return e}function Wt(e,t){const n=t.scrollParent.clientHeight+t.y-e.coordinates.y;if(!(!t.scrollOutside&&n<0)&&n<(1-t.yThresh)*t.scrollParent.clientHeight&&!(t.scrollParent.scrollTop+t.scrollParent.clientHeight>=t.scrollParent.scrollHeight))return e}function Xt(e,t){t.touchMoving=!0,t.touchedNode.style.display=t.touchedNodeDisplay||"";const{x:n,y:a}=q(e.e);t.coordinates.y=a,t.coordinates.x=n;const r=t.touchStartLeft??0,o=t.touchStartTop??0;t.touchedNode.style.left=`${n-r}px`,t.touchedNode.style.top=`${a-o}px`,Mt(t,e.targetData.parent.data.config)}function Yt(e,t){if(e.targetData.parent.data.config.longTouch&&!t.longTouch){clearTimeout(t.longTouchTimeout);return}e.e.cancelable&&e.e.preventDefault(),Xt(e,t),ne();const a=bt(e);if(!a)return;const r={e:e.e,targetData:a};"node"in a?a.node.el.dispatchEvent(new CustomEvent("touchOverNode",{detail:r})):a.parent.el.dispatchEvent(new CustomEvent("touchOverParent",{detail:r}))}function ne(){for(const e of Object.keys(ce)){const[t,n]=ce[e];Ee(e,t,n)}}function Ee(e,t,n){const a=Rt(e);a&&(a.scrollParent.scrollBy(t,n),setTimeout(()=>{Ee(e,t,n)},"touchedNode"in a?10:100))}function Jt(e){if(!i)return;const{x:t,y:n}=q(e.e);i.coordinates.y=n,i.coordinates.x=t,ne(),nn(e,i)}function jt(e){if(!i)return;const{x:t,y:n}=q(e.e);i.coordinates.y=n,i.coordinates.x=t,ne(),ae(e,i)}function Gt(e){i&&ae(e.detail,i)}function Qt(e,t){if(e.targetData.parent.el===t.lastParent.el)return!1;const n=e.targetData.parent.data.config;if(n.dropZone===!1)return!1;const a=t.initialParent.data.config;return n.accepts?n.accepts(e.targetData.parent,t.initialParent,t.lastParent,t):!(!n.group||n.group!==a.group)}function en(e,t){e.e.preventDefault()}function tn(e,t){e.e.preventDefault()}function nn(e,t){e.e.preventDefault(),e.e.stopPropagation(),e.targetData.parent.el===t.lastParent?.el?Be(e,t):ae(e,t)}function an(e,t,n,a){if(t.affectedNodes.map(v=>v.data.value).includes(e.targetData.node.data.value))return!1;if(t.remapJustFinished)return t.remapJustFinished=!1,(e.targetData.node.data.value===t.lastTargetValue||t.draggedNodes.map(v=>v.el).includes(e.targetData.node.el))&&(t.lastTargetValue=e.targetData.node.data.value),!1;if(t.draggedNodes.map(v=>v.el).includes(e.targetData.node.el))return t.lastTargetValue=void 0,!1;if(e.targetData.node.data.value===t.lastTargetValue||t.preventEnter||e.targetData.parent.el!==t.lastParent?.el||e.targetData.parent.data.config.sortable===!1)return!1;const r=e.targetData.node.el.getBoundingClientRect(),o=t.draggedNode.el.getBoundingClientRect(),l=r.y-o.y,s=r.x-o.x;let c;Math.abs(l)>Math.abs(s)?c=l>0?"above":"below":c=s>0?"left":"right";const h=t.lastParent.data.config.threshold;switch(c){case"left":if(n>r.x+r.width*h.horizontal)return t.incomingDirection="left",!0;break;case"right":if(n<r.x+r.width*(1-h.horizontal))return t.incomingDirection="right",!0;break;case"above":if(a>r.y+r.height*h.vertical)return t.incomingDirection="above",!0;break;case"below":if(a<r.y+r.height*(1-h.vertical))return t.incomingDirection="below",!0;break}return!1}function Be(e,t){const{x:n,y:a}=q(e.e);if(!an(e,t,n,a))return;const r=t.draggedNode.data.index>e.targetData.node.data.index?[e.targetData.node.data.index,t.draggedNode.data.index]:[t.draggedNode.data.index,e.targetData.node.data.index];t.targetIndex=e.targetData.node.data.index,t.affectedNodes=e.targetData.parent.data.enabledNodes.filter(o=>r[0]<=o.data.index&&o.data.index<=r[1]&&o.el!==t.draggedNode.el),e.targetData.parent.data.config.performSort(t,e)}function z(e){function t(n){const a=$.get(n),r=n.parentNode||i?.lastParent?.el;if(!a)return;const o=A.get(r);if(o)return{node:{el:n,data:a},parent:{el:r,data:o}}}return n=>{const a=t(n.currentTarget);if(a)return e({e:n,targetData:a})}}function Ae(e,t){const n=Te(e),a=le(e.lastParent.el,e.lastParent.data).filter(s=>!n.includes(s)),r=le(t.targetData.parent.el,t.targetData.parent.data),o=e.initialParent.el===t.targetData.parent.el&&t.targetData.parent.data.config.sortable===!1;let l;"node"in t.targetData?(o?l=e.initialIndex:t.targetData.parent.data.config.sortable===!1?l=t.targetData.parent.data.enabledNodes.length:l=t.targetData.node.data.index,r.splice(l,0,...n)):(l=o?e.initialIndex:t.targetData.parent.data.enabledNodes.length,r.splice(l,0,...n)),ie(e.lastParent.el,e.lastParent.data,a),ie(t.targetData.parent.el,t.targetData.parent.data,r)}function ae(e,t){Qt(e,t)&&(e.targetData.parent.data.config.performTransfer(t,e),t.lastParent=e.targetData.parent,t.transferred=!0)}function rn(e){function t(n){const a=A.get(n);if(a)return{parent:{el:n,data:a}}}return n=>{const a=t(n.currentTarget);if(a)return e({e:n,targetData:a})}}function ue(e){if(e instanceof HTMLElement)return e;if(e.value instanceof HTMLElement)return e.value;if("$el"in e&&e.$el instanceof HTMLElement)return e.$el}function on(e,t){Array.isArray(e)||(e=[e]);for(const n of e){const a=ue(n);if(a)return t(a);const r=Z(n,o=>{if(!o)return;const l=ue(o);l?t(l):console.warn("Invalid parent element",o),r()})}}var de=new WeakMap;function ln(e){const t=de.get(e);return t?t.value:(console.warn("No values found for parent element"),[])}function sn(e,t){const n=de.get(t);n&&(n.value=e)}function Se(e){ve&&(Array.isArray(e)||(e=[e]),e.forEach(t=>{const{parent:n,values:a,...r}=t;on(n,dn(r,a))}))}function dn(e,t){return n=>{de.set(n,t),yt({parent:n,getValues:ln,setValues:sn,config:{...e,dropZones:[]}})}}const cn={class:"border rounded px-3 py-2"},un={key:0,class:"d-flex justify-end flex-wrap gap-x-2"},fn={__name:"KanbanBoardEditDrawer",props:{kanbanItem:{type:null,required:!1,default:()=>({item:{title:"",dueDate:"2022-01-01T00:00:00Z",labels:[],members:[],id:0,attachments:0,commentsCount:0,image:"",comments:""},boardId:0,boardName:""})},isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","update:kanbanItem","deleteKanbanItem"],setup(e,{emit:t}){const n=e,a=t,r=w(),o=["UX","Image","Code Review","Dashboard","App","Charts & Maps"],l=w(JSON.parse(JSON.stringify(n.kanbanItem.item))),s=T=>{a("update:isDrawerOpen",T),T||r.value?.reset()};Z(()=>n.kanbanItem,()=>{l.value=JSON.parse(JSON.stringify(n.kanbanItem.item))},{deep:!0});const c=()=>{r.value?.validate().then(async T=>{T.valid&&(a("update:kanbanItem",{item:l.value,boardId:n.kanbanItem.boardId,boardName:n.kanbanItem.boardName}),a("update:isDrawerOpen",!1),await _e(),r.value?.reset())})},h=()=>{a("deleteKanbanItem",{item:l.value,boardId:n.kanbanItem.boardId,boardName:n.kanbanItem.boardName}),a("update:isDrawerOpen",!1)},v={UX:"success",Image:"warning","Code Review":"error",Dashboard:"info",App:"secondary","Charts & Maps":"primary"},P=[{img:Ge,name:"John Doe"},{img:Qe,name:"Jane Smith"},{img:et,name:"Robert Johnson"},{img:tt,name:"Lucy Brown"},{img:nt,name:"Mike White"},{img:at,name:"Anna Black"}],x=w(),f=He({content:"",extensions:[Ze,Je.configure({types:["heading","paragraph"]}),We.configure({placeholder:"Write a Comment..."}),Xe]}),V=w({altFormat:"j M, Y",altInput:!0,dateFormat:"Y-m-d"});return(T,p)=>{const F=qe,K=Re,H=Ue,D=Me,m=$e("IconBtn");return y(),S(st,{"data-allow-mismatch":"",location:"end",width:370,temporary:"",border:"0","model-value":n.isDrawerOpen,"onUpdate:modelValue":s},{default:b(()=>[d(F,{title:"Edit Task",onCancel:p[0]||(p[0]=g=>T.$emit("update:isDrawerOpen",!1))}),d(rt),d(u(je),{options:{wheelPropagation:!1},style:{"block-size":"calc(100vh - 4rem)"}},{default:b(()=>[u(l)?(y(),S(u(ee),{key:0,ref_key:"refEditTaskForm",ref:r,onSubmit:W(c,["prevent"])},{default:b(()=>[d(me,{class:"kanban-editor-drawer"},{default:b(()=>[d(ot,null,{default:b(()=>[d(M,{cols:"12"},{default:b(()=>[d(K,{modelValue:u(l).title,"onUpdate:modelValue":p[1]||(p[1]=g=>u(l).title=g),label:"Title",rules:["requiredValidator"in T?T.requiredValidator:u(G)]},null,8,["modelValue","rules"])]),_:1}),d(M,{cols:"12"},{default:b(()=>[d(H,{modelValue:u(l).dueDate,"onUpdate:modelValue":p[2]||(p[2]=g=>u(l).dueDate=g),label:"Due date",config:u(V)},null,8,["modelValue","config"])]),_:1}),d(M,{cols:"12"},{default:b(()=>[d(D,{modelValue:u(l).labels,"onUpdate:modelValue":p[3]||(p[3]=g=>u(l).labels=g),items:o,label:"Label",multiple:"",eager:""},{chip:b(({item:g})=>[d(ge,{color:v[g.raw]},{default:b(()=>[B(L(g.raw),1)]),_:2},1032,["color"])]),_:1},8,["modelValue"])]),_:1}),d(M,{cols:"12"},{default:b(()=>[p[12]||(p[12]=N("p",{class:"mb-1 text-body-2 text-high-emphasis",style:{"line-height":"15px"}}," Assigned ",-1)),N("div",null,[d(lt,{modelValue:u(l).members,"onUpdate:modelValue":p[4]||(p[4]=g=>u(l).members=g),items:P,"item-title":"name","item-value":"name",multiple:"","return-object":"",variant:"plain","menu-props":{offset:10},class:"assignee-select"},{selection:b(({item:g})=>[d(pe,{size:"26"},{default:b(()=>[d(re,{src:g.raw.img},null,8,["src"]),d(fe,{activator:"parent"},{default:b(()=>[B(L(g.raw.name),1)]),_:2},1024)]),_:2},1024)]),"prepend-inner":b(()=>[d(m,{size:"26",variant:"tonal",color:"secondary"},{default:b(()=>[d(I,{size:"20",icon:"tabler-plus"})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),d(M,{cols:"12"},{default:b(()=>[d(it,{modelValue:u(x),"onUpdate:modelValue":p[5]||(p[5]=g=>X(x)?x.value=g:null),"prepend-icon":"",multiple:"",variant:"outlined",label:"No file chosen",clearable:""},{append:b(()=>[d(U,{variant:"tonal"},{default:b(()=>[...p[13]||(p[13]=[B(" Choose ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),d(M,{cols:"12"},{default:b(()=>[p[14]||(p[14]=N("p",{class:"text-body-2 text-high-emphasis mb-1",style:{"line-height":"15px"}}," COMMENT ",-1)),N("div",cn,[d(u(Ye),{editor:u(f)},null,8,["editor"]),u(f)?(y(),C("div",un,[d(I,{icon:"tabler-bold",color:u(f).isActive("bold")?"primary":"secondary",size:"20",onClick:p[6]||(p[6]=g=>u(f).chain().focus().toggleBold().run())},null,8,["color"]),d(I,{color:u(f).isActive("underline")?"primary":"secondary",icon:"tabler-underline",size:"20",onClick:p[7]||(p[7]=g=>u(f).commands.toggleUnderline())},null,8,["color"]),d(I,{color:u(f).isActive("italic")?"primary":"secondary",icon:"tabler-italic",size:"20",onClick:p[8]||(p[8]=g=>u(f).chain().focus().toggleItalic().run())},null,8,["color"]),d(I,{color:u(f).isActive({textAlign:"left"})?"primary":"secondary",icon:"tabler-align-left",size:"20",onClick:p[9]||(p[9]=g=>u(f).chain().focus().setTextAlign("left").run())},null,8,["color"]),d(I,{color:u(f).isActive({textAlign:"center"})?"primary":"secondary",icon:"tabler-align-center",size:"20",onClick:p[10]||(p[10]=g=>u(f).chain().focus().setTextAlign("center").run())},null,8,["color"]),d(I,{color:u(f).isActive({textAlign:"right"})?"primary":"secondary",icon:"tabler-align-right",size:"20",onClick:p[11]||(p[11]=g=>u(f).chain().focus().setTextAlign("right").run())},null,8,["color"])])):E("",!0)])]),_:1}),d(M,{cols:"12"},{default:b(()=>[d(U,{type:"submit",class:"me-4"},{default:b(()=>[...p[15]||(p[15]=[B(" Update ",-1)])]),_:1}),d(U,{color:"error",variant:"tonal",onClick:h},{default:b(()=>[...p[16]||(p[16]=[B(" Delete ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)):E("",!0)]),_:1})]),_:1},8,["model-value"])}}},mn={class:"d-flex align-start gap-2"},gn={key:0,class:"d-flex flex-wrap gap-2"},pn={class:"text-base text-high-emphasis mb-0"},bn={class:"task-footer d-flex align-center flex-wrap justify-space-between"},hn={key:0,class:"d-flex align-center gap-4"},vn={key:0},Dn={class:"text-body-1 d-inline-block"},yn={key:1},Nn={class:"text-body-1 d-inline-block"},wn={key:1,class:"v-avatar-group"},xn={__name:"KanbanCard",props:{item:{type:null,required:!0},boardId:{type:Number,required:!0},boardName:{type:String,required:!0}},emits:["deleteKanbanItem"],setup(e,{emit:t}){const n=e,a=t,r={UX:"success",Image:"warning","Code Review":"error",Dashboard:"info",App:"secondary","Charts & Maps":"primary"},o=[{title:"Copy Task link",href:"#"},{title:"Duplicate Task",href:"#"},{title:"Delete",onClick:()=>{a("deleteKanbanItem",{item:n.item,boardId:n.boardId,boardName:n.boardName})}}];return(l,s)=>e.item?(y(),S(ft,{key:0,ripple:!1,link:!1,class:"kanban-card position-relative"},{default:b(()=>[d(me,{class:"d-flex flex-column gap-2"},{default:b(()=>[N("div",mn,[e.item.labels&&e.item.labels.length?(y(),C("div",gn,[(y(!0),C(Y,null,Q(e.item.labels,c=>(y(),S(ge,{key:c,size:"small",color:r[c]},{default:b(()=>[B(L(c),1)]),_:2},1032,["color"]))),128))])):E("",!0),d(Oe),d(ze,null,{activator:b(({props:c,isActive:h})=>[d(I,Le(c,{icon:"tabler-dots-vertical",class:"position-absolute more-options",style:[{"inset-block-start":"16px","inset-inline-end":"10px"},h?"opacity: 1":""],size:"20",onClick:s[0]||(s[0]=W(()=>{},["stop"]))}),null,16,["style"])]),default:b(()=>[d(ut,{items:o,"item-props":""})]),_:1})]),e.item.image&&e.item.image.length?(y(),S(re,{key:0,src:e.item.image,class:"rounded"},null,8,["src"])):E("",!0),N("p",pn,L(e.item.title),1),N("div",bn,[e.item.attachments||e.item.commentsCount?(y(),C("div",hn,[e.item.attachments?(y(),C("div",vn,[d(I,{size:"20",icon:"tabler-paperclip",class:"me-1"}),N("span",Dn,L(e.item.attachments),1)])):E("",!0),e.item.commentsCount?(y(),C("div",yn,[d(I,{size:"20",icon:"tabler-message-2",class:"me-1"}),N("span",Nn,L(e.item.commentsCount),1)])):E("",!0)])):E("",!0),e.item.members&&e.item.members.length?(y(),C("div",wn,[(y(!0),C(Y,null,Q(e.item.members,c=>(y(),S(pe,{key:c.name,size:"30"},{default:b(()=>[d(re,{src:c.img},null,8,["src"]),d(fe,{activator:"parent"},{default:b(()=>[B(L(c.name),1)]),_:2},1024)]),_:2},1024))),128))])):E("",!0)])]),_:1})]),_:1})):E("",!0)}},kn=ct(xn,[["__scopeId","data-v-d883cb77"]]),Tn={class:"kanban-board"},In={class:"kanban-board-header pb-4"},Vn={key:1,class:"d-flex align-center justify-space-between"},Cn={class:"text-lg font-weight-medium text-truncate"},Pn={class:"d-flex align-center"},En={class:"add-new-form"},Bn={class:"mb-4"},An={class:"d-flex gap-4 flex-wrap"},Sn={__name:"KanbanItems",props:{kanbanIds:{type:Array,required:!0},groupName:{type:String,required:!0},boardName:{type:String,required:!0},boardId:{type:Number,required:!0},kanbanData:{type:null,required:!0}},emits:["renameBoard","deleteBoard","addNewItem","editItem","updateItemsState","deleteItem"],setup(e,{emit:t}){const n=e,a=t,r=w(),o=w(n.boardName),l=w(n.kanbanIds),s=w(!1),c=w(!1),h=w(),v=w(""),P=w(),x=[{title:"Rename",prependIcon:"tabler-pencil",onClick:()=>{c.value=!0}},{title:"Delete",prependIcon:"tabler-trash",onClick:()=>a("deleteBoard",n.boardId)}],f=()=>{P.value?.validate().then(D=>{D.valid&&(a("renameBoard",{oldName:n.boardName,newName:o.value,boardId:n.boardId}),c.value=!1)})},V=()=>{h.value?.validate().then(D=>{D.valid&&(a("addNewItem",{itemTitle:v.value,boardName:n.boardName,boardId:n.boardId}),s.value=!1,v.value="")})};Se({parent:r,values:l,group:n.groupName,draggable:D=>D.classList.contains("kanban-card"),plugins:[we()],performTransfer:(D,m)=>{Ae(D,m),a("updateItemsState",{boardId:n.boardId,ids:l.value})},handleEnd:D=>{Ce(D),a("updateItemsState",{boardId:n.boardId,ids:l.value})}}),Z(()=>n,()=>{l.value=n.kanbanIds},{immediate:!0,deep:!0});const T=D=>n.kanbanData.items.find(m=>m.id===D),p=D=>{a("deleteItem",D)},F=()=>{s.value=!1,h.value?.reset()};oe(h,F),oe(P,()=>{c.value=!1});const K=()=>{c.value=!1,o.value=n.boardName},H=D=>{D.key==="Enter"&&!D.shiftKey&&V()};return(D,m)=>{const g=dt;return y(),C("div",Tn,[N("div",In,[u(c)?(y(),S(u(ee),{key:0,ref_key:"refKanbanBoardTitle",ref:P,onSubmit:W(f,["prevent"])},{default:b(()=>[d(be,{modelValue:u(o),"onUpdate:modelValue":m[0]||(m[0]=k=>X(o)?o.value=k:null),autofocus:"",variant:"underlined",rules:["requiredValidator"in D?D.requiredValidator:u(G)],"hide-details":"",class:"border-0",onKeydown:j(K,["esc"])},{"append-inner":b(()=>[d(I,{size:"20",color:"success",icon:"tabler-check",class:"me-1",onClick:f}),d(I,{size:"20",color:"error",icon:"tabler-x",onClick:K})]),_:1},8,["modelValue","rules"])]),_:1},512)):(y(),C("div",Vn,[N("h4",Cn,L(e.boardName),1),N("div",Pn,[d(I,{class:"drag-handler",size:"20",icon:"tabler-arrows-move"}),d(g,{size:"28","icon-size":"20",class:"text-high-emphasis","menu-list":x,"item-props":""})])]))]),u(l)?(y(),C("div",{key:0,ref_key:"refKanbanBoard",ref:r,class:Fe(["kanban-board-drop-zone rounded d-flex flex-column gap-4",u(l).length?"mb-4":""])},[(y(!0),C(Y,null,Q(u(l),k=>(y(),S(kn,{key:k,item:T(k),"board-id":n.boardId,"board-name":n.boardName,onDeleteKanbanItem:p,onClick:Fn=>a("editItem",{item:T(k),boardId:n.boardId,boardName:n.boardName})},null,8,["item","board-id","board-name","onClick"]))),128)),N("div",En,[N("h6",{class:"text-base font-weight-regular cursor-pointer ms-4",onClick:m[1]||(m[1]=k=>s.value=!u(s))},[d(I,{size:"15",icon:"tabler-plus"}),m[3]||(m[3]=B(" Add New Item ",-1))]),u(s)?(y(),S(u(ee),{key:0,ref_key:"refForm",ref:h,class:"mt-4","validate-on":"submit",onSubmit:W(V,["prevent"])},{default:b(()=>[N("div",Bn,[d(mt,{modelValue:u(v),"onUpdate:modelValue":m[2]||(m[2]=k=>X(v)?v.value=k:null),rules:["requiredValidator"in D?D.requiredValidator:u(G)],placeholder:"Add Content",autofocus:"",rows:"2",onKeydown:[j(H,["enter"]),j(F,["esc"])]},null,8,["modelValue","rules"])]),N("div",An,[d(U,{size:"small",type:"submit"},{default:b(()=>[...m[4]||(m[4]=[B(" Add ",-1)])]),_:1}),d(U,{size:"small",variant:"tonal",color:"secondary",onClick:F},{default:b(()=>[...m[5]||(m[5]=[B(" Cancel ",-1)])]),_:1})])]),_:1},512)):E("",!0)])],2)):E("",!0)])}}},$n={class:"kanban-main-wrapper d-flex gap-4 h-100"},_n={class:"add-new-form text-no-wrap",style:{"inline-size":"10rem"}},On={class:"mb-4"},zn={class:"d-flex gap-3"},Ln={__name:"KanbanBoard",props:{kanbanData:{type:null,required:!0},groupName:{type:String,required:!1,default:"kanban"}},emits:["addNewBoard","renameBoard","deleteBoard","addNewItem","editItem","deleteItem","updateItemsState","updateBoardState"],setup(e,{emit:t}){const n=e,a=t,r=w(),o=w(n.kanbanData.boards),l=w(!1),s=w(!1),c=w(),h=w(""),v=w(),P=()=>{c.value?.validate().then(m=>{m.valid&&(a("addNewBoard",h.value),s.value=!1,h.value="")})},x=m=>{a("deleteBoard",m)},f=m=>{a("renameBoard",m)},V=m=>{a("addNewItem",m)},T=m=>{m&&(v.value=m,l.value=!0)},p=m=>{a("updateItemsState",m)};Se({parent:r,values:o,dragHandle:".drag-handler",plugins:[we()]}),Z(()=>n,()=>{o.value=n.kanbanData.boards,se(r.value)},{deep:!0});const F=m=>{a("editItem",m)},K=m=>{a("deleteItem",m)};Z(o,()=>{const m=o.value.map(g=>g.id);a("updateBoardState",m)},{deep:!0});const H=()=>n.kanbanData.boards.some(m=>h.value&&m.title.toLowerCase()===h.value.toLowerCase())?"Board title already exists":!0,D=()=>{s.value=!1,c.value?.reset()};return oe(c,D),(m,g)=>(y(),C(Y,null,[N("div",$n,[N("div",{ref_key:"kanbanWrapper",ref:r,class:"d-flex ga-6"},[(y(!0),C(Y,null,Q(u(o),k=>(y(),S(Sn,{key:k.id,"group-name":e.groupName,"kanban-ids":k.itemsIds,"board-name":k.title,"board-id":k.id,"kanban-items":e.kanbanData.items,"kanban-data":e.kanbanData,onDeleteBoard:x,onRenameBoard:f,onAddNewItem:V,onEditItem:T,onUpdateItemsState:p,onDeleteItem:K},null,8,["group-name","kanban-ids","board-name","board-id","kanban-items","kanban-data"]))),128))],512),N("div",_n,[N("h6",{class:"text-lg font-weight-medium cursor-pointer",onClick:g[0]||(g[0]=k=>s.value=!u(s))},[d(I,{size:"18",icon:"tabler-plus"}),g[3]||(g[3]=B(" Add New ",-1))]),u(s)?(y(),S(u(ee),{key:0,ref_key:"refAddNewBoard",ref:c,class:"mt-4","validate-on":"submit",onSubmit:W(P,["prevent"])},{default:b(()=>[N("div",On,[d(be,{modelValue:u(h),"onUpdate:modelValue":g[1]||(g[1]=k=>X(h)?h.value=k:null),rules:["requiredValidator"in m?m.requiredValidator:u(G),H],autofocus:"",placeholder:"Add Board Title",onKeydown:j(D,["esc"])},null,8,["modelValue","rules"])]),N("div",zn,[d(U,{size:"small",type:"submit"},{default:b(()=>[...g[4]||(g[4]=[B(" Add ",-1)])]),_:1}),d(U,{size:"small",variant:"tonal",color:"secondary",type:"reset",onClick:D},{default:b(()=>[...g[5]||(g[5]=[B(" Cancel ",-1)])]),_:1})])]),_:1},512)):E("",!0)])]),d(fn,{"is-drawer-open":u(l),"onUpdate:isDrawerOpen":g[2]||(g[2]=k=>X(l)?l.value=k:null),"kanban-item":u(v),"onUpdate:kanbanItem":F,onDeleteKanbanItem:K},null,8,["is-drawer-open","kanban-item"])],64))}},Va={__name:"index",async setup(e){let t,n;const{data:a,execute:r}=([t,n]=Ke(()=>gt("/apps/kanban")),t=await t,n(),t),o=async f=>{await O("/apps/kanban/board/add",{method:"POST",body:{title:f}}),r()},l=async f=>{await O(`/apps/kanban/board/${f}`,{method:"DELETE"}),r()},s=async f=>{await O("/apps/kanban/board/rename",{method:"PUT",body:f}),r()},c=async f=>{await O("/apps/kanban/item/add",{method:"POST",body:f}),r()},h=async f=>{await O("/apps/kanban/item/update",{method:"PUT",body:f}),r()},v=async f=>{f.item&&f.item.id&&(await O(`/apps/kanban/item/${f.item.id}`,{method:"DELETE",body:f}),r())},P=async f=>{await O("/apps/kanban/item/state-update",{method:"PUT",body:f})},x=async f=>{await O("/apps/kanban/board/state-update",{method:"PUT",body:f})};return(f,V)=>u(a)?(y(),S(Ln,{key:0,"kanban-data":u(a),onAddNewBoard:o,onDeleteBoard:l,onRenameBoard:s,onAddNewItem:c,onEditItem:h,onDeleteItem:v,onUpdateItemsState:P,onUpdateBoardState:x},null,8,["kanban-data"])):E("",!0)}};export{Va as default};
